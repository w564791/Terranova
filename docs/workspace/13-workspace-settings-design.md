# Workspaceæ¨¡å— - è®¾ç½®é¡µé¢è¯¦ç»†è®¾è®¡

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
> **åˆ›å»ºæ—¥æœŸ**: 2025-10-10  
> **çŠ¶æ€**: å®Œæ•´è®¾è®¡

## ğŸ“˜ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†å®šä¹‰Workspaceè®¾ç½®é¡µé¢çš„å®Œæ•´è®¾è®¡ï¼ŒåŒ…æ‹¬æ‰€æœ‰è®¾ç½®é€‰é¡¹ã€äº¤äº’æµç¨‹å’Œå®ç°ç»†èŠ‚ã€‚è®¾ç½®é¡µé¢æ˜¯Workspaceè¯¦æƒ…é¡µçš„ä¸€ä¸ªæ ‡ç­¾é¡µï¼Œæä¾›å¯¹Workspaceé…ç½®çš„å®Œæ•´ç®¡ç†èƒ½åŠ›ã€‚

## ğŸ¯ è®¾è®¡åŸåˆ™

1. **åˆ†ç»„æ¸…æ™°**: è®¾ç½®æŒ‰åŠŸèƒ½åˆ†ç»„ï¼Œä¾¿äºæŸ¥æ‰¾
2. **å³æ—¶ä¿å­˜**: æ¯ä¸ªè®¾ç½®é¡¹ç‹¬ç«‹ä¿å­˜ï¼Œæ— éœ€æ•´ä½“æäº¤
3. **æƒé™æ§åˆ¶**: æ ¹æ®ç”¨æˆ·æƒé™æ˜¾ç¤º/éšè—è®¾ç½®é¡¹
4. **å±é™©æ“ä½œ**: åˆ é™¤ç­‰å±é™©æ“ä½œéœ€è¦äºŒæ¬¡ç¡®è®¤
5. **å®æ—¶åé¦ˆ**: è®¾ç½®æ›´æ”¹åç«‹å³æ˜¾ç¤ºç»“æœ

## ğŸ“„ é¡µé¢ç»“æ„

### è·¯å¾„
```
/workspaces/:id?tab=settings&section=general
```

### æ ‡ç­¾é¡µä½ç½®
```
Overview | Runs | States | Variables | Health | [Settings]
```

### Settingså­é¡µé¢å¯¼èˆª
Settingsé¡µé¢é‡‡ç”¨å·¦ä¾§tabå¯¼èˆªè®¾è®¡ï¼ŒåŒ…å«ä»¥ä¸‹å­é¡µé¢ï¼š
- **General** - å¸¸è§„è®¾ç½®ï¼ˆåŸºæœ¬ä¿¡æ¯ã€æ‰§è¡Œé…ç½®ã€Applyæ–¹æ³•ï¼‰
- **Locking** - é”å®šè®¾ç½®
- **Notifications** - é€šçŸ¥è®¾ç½®ï¼ˆComing Soonï¼‰
- **Destruction and Deletion** - åˆ é™¤è®¾ç½®

## ğŸ¨ UIè®¾è®¡

### å¸ƒå±€ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Workspace Settings (å·¦ä¾§å¯¼èˆªæ  - 260px)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ General         â”‚  â”‚  General Settings            â”‚  â”‚
â”‚  â”‚ Locking         â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚
â”‚  â”‚ Notifications   â”‚  â”‚  [å†…å®¹åŒºåŸŸ]                   â”‚  â”‚
â”‚  â”‚ Destruction     â”‚  â”‚                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡ç‰¹ç‚¹
1. **å·¦ä¾§å›ºå®šå¯¼èˆª** - 260pxå®½åº¦ï¼Œå›ºå®šåœ¨å·¦ä¾§
2. **å³ä¾§å†…å®¹åŒº** - è‡ªé€‚åº”å®½åº¦ï¼Œæœ€å¤§1200px
3. **æ¸…æ™°çš„è§†è§‰å±‚æ¬¡** - ä½¿ç”¨å¡ç‰‡å’Œåˆ†ç»„
4. **ä¿å­˜æŒ‰é’®** - æ¯ä¸ªè®¾ç½®é¡µé¢åº•éƒ¨æœ‰ç»Ÿä¸€çš„ä¿å­˜æŒ‰é’®
5. **å“åº”å¼è®¾è®¡** - ç§»åŠ¨ç«¯è‡ªåŠ¨è°ƒæ•´å¸ƒå±€

## ğŸ”§ è®¾ç½®åˆ†ç»„

### 1. å¸¸è§„è®¾ç½® (General)

#### 1.1 åŸºæœ¬ä¿¡æ¯

**å­—æ®µ**:
- **Name** (åç§°) - å¿…å¡«ï¼Œå”¯ä¸€
- **Description** (æè¿°) - å¯é€‰
- **Tags** (æ ‡ç­¾) - å¯é€‰ï¼Œå¤šä¸ªæ ‡ç­¾

**å¸ƒå±€**:
```tsx
<div className={styles.section}>
  <h2 className={styles.sectionTitle}>åŸºæœ¬ä¿¡æ¯</h2>
  
  <div className={styles.field}>
    <label className={styles.label}>
      åç§° <span className={styles.required}>*</span>
    </label>
    <input
      type="text"
      value={name}
      onChange={handleNameChange}
      onBlur={handleNameSave}
      className={styles.input}
      placeholder="workspace-name"
    />
    {nameError && (
      <div className={styles.error}>{nameError}</div>
    )}
    <div className={styles.hint}>
      åç§°åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€æ¨ªçº¿å’Œä¸‹åˆ’çº¿
    </div>
  </div>
  
  <div className={styles.field}>
    <label className={styles.label}>æè¿°</label>
    <textarea
      value={description}
      onChange={handleDescriptionChange}
      onBlur={handleDescriptionSave}
      className={styles.textarea}
      rows={3}
      placeholder="æè¿°æ­¤Workspaceçš„ç”¨é€”..."
    />
  </div>
  
  <div className={styles.field}>
    <label className={styles.label}>æ ‡ç­¾</label>
    <TagInput
      tags={tags}
      onChange={handleTagsChange}
      onBlur={handleTagsSave}
      placeholder="æ·»åŠ æ ‡ç­¾..."
    />
    <div className={styles.hint}>
      æ ‡ç­¾ç”¨äºç»„ç»‡å’Œç­›é€‰Workspace
    </div>
  </div>
</div>
```

**ä¿å­˜é€»è¾‘**:
```typescript
const handleNameSave = async () => {
  if (!validateName(name)) {
    setNameError('åç§°æ ¼å¼ä¸æ­£ç¡®');
    return;
  }
  
  try {
    await api.patch(`/workspaces/${workspaceId}`, { name });
    toast.success('åç§°å·²æ›´æ–°');
    setNameError('');
  } catch (error) {
    if (error.code === 'NAME_EXISTS') {
      setNameError('åç§°å·²å­˜åœ¨');
    } else {
      toast.error(`æ›´æ–°å¤±è´¥: ${error.message}`);
    }
    // ä¿ç•™ç”¨æˆ·è¾“å…¥ï¼Œä¸å›æ»š
  }
};
```

#### 1.2 æ‰§è¡Œé…ç½®

**å­—æ®µ**:
- **Execution Mode** (æ‰§è¡Œæ¨¡å¼) - local/agent/k8s
- **Agent Pool** (Agentæ± ) - ä»…agentæ¨¡å¼
- **K8s Config** (K8sé…ç½®) - ä»…k8sæ¨¡å¼
- **Terraform Version** (Terraformç‰ˆæœ¬)
- **Working Directory** (å·¥ä½œç›®å½•)

**å¸ƒå±€**:
```tsx
<div className={styles.section}>
  <h2 className={styles.sectionTitle}>æ‰§è¡Œé…ç½®</h2>
  
  <div className={styles.field}>
    <label className={styles.label}>
      æ‰§è¡Œæ¨¡å¼ <span className={styles.required}>*</span>
    </label>
    <select
      value={executionMode}
      onChange={handleExecutionModeChange}
      className={styles.select}
    >
      <option value="local">Local - æœ¬åœ°æ‰§è¡Œ</option>
      <option value="agent">Agent - è¿œç¨‹Agentæ‰§è¡Œ</option>
      <option value="k8s">K8s - Kubernetesæ‰§è¡Œ</option>
    </select>
    <div className={styles.hint}>
      æ›´æ”¹æ‰§è¡Œæ¨¡å¼å°†å½±å“åç»­æ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼
    </div>
  </div>
  
  {/* Agentæ¨¡å¼é…ç½® */}
  {executionMode === 'agent' && (
    <div className={styles.field}>
      <label className={styles.label}>
        Agent Pool <span className={styles.required}>*</span>
      </label>
      <select
        value={agentPoolId}
        onChange={handleAgentPoolChange}
        className={styles.select}
      >
        <option value="">é€‰æ‹©Agent Pool</option>
        {agentPools.map(pool => (
          <option key={pool.id} value={pool.id}>
            {pool.name} ({pool.selection_strategy})
          </option>
        ))}
      </select>
      {agentPoolError && (
        <div className={styles.error}>{agentPoolError}</div>
      )}
    </div>
  )}
  
  {/* K8sæ¨¡å¼é…ç½® */}
  {executionMode === 'k8s' && (
    <div className={styles.field}>
      <label className={styles.label}>
        K8sé…ç½® <span className={styles.required}>*</span>
      </label>
      <select
        value={k8sConfigId}
        onChange={handleK8sConfigChange}
        className={styles.select}
      >
        <option value="">é€‰æ‹©K8sé…ç½®</option>
        {k8sConfigs.map(config => (
          <option key={config.id} value={config.id}>
            {config.name} ({config.namespace})
          </option>
        ))}
      </select>
    </div>
  )}
  
  <div className={styles.field}>
    <label className={styles.label}>Terraformç‰ˆæœ¬</label>
    <select
      value={terraformVersion}
      onChange={handleTerraformVersionChange}
      className={styles.select}
    >
      {terraformVersions.map(version => (
        <option key={version} value={version}>
          {version}
        </option>
      ))}
    </select>
    <div className={styles.hint}>
      æ›´æ”¹ç‰ˆæœ¬å°†åœ¨ä¸‹æ¬¡è¿è¡Œæ—¶ç”Ÿæ•ˆ
    </div>
  </div>
  
  <div className={styles.field}>
    <label className={styles.label}>å·¥ä½œç›®å½•</label>
    <input
      type="text"
      value={workingDirectory}
      onChange={handleWorkingDirectoryChange}
      onBlur={handleWorkingDirectorySave}
      className={styles.input}
      placeholder="/"
    />
    <div className={styles.hint}>
      Terraformé…ç½®æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•è·¯å¾„
    </div>
  </div>
</div>
```

**æ‰§è¡Œæ¨¡å¼åˆ‡æ¢é€»è¾‘**:
```typescript
const handleExecutionModeChange = async (e: React.ChangeEvent<HTMLSelectElement>) => {
  const newMode = e.target.value;
  
  // ç¡®è®¤å¯¹è¯æ¡†
  const confirmed = await confirmDialog({
    title: 'æ›´æ”¹æ‰§è¡Œæ¨¡å¼',
    message: `ç¡®å®šè¦å°†æ‰§è¡Œæ¨¡å¼ä» ${executionMode} æ›´æ”¹ä¸º ${newMode} å—ï¼Ÿè¿™å°†å½±å“åç»­æ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼ã€‚`,
    confirmText: 'ç¡®å®š',
    cancelText: 'å–æ¶ˆ'
  });
  
  if (!confirmed) return;
  
  try {
    // æ›´æ–°æ‰§è¡Œæ¨¡å¼
    await api.patch(`/workspaces/${workspaceId}`, {
      execution_mode: newMode,
      // æ¸…é™¤æ—§æ¨¡å¼çš„é…ç½®
      agent_pool_id: newMode === 'agent' ? agentPoolId : null,
      k8s_config_id: newMode === 'k8s' ? k8sConfigId : null
    });
    
    setExecutionMode(newMode);
    toast.success('æ‰§è¡Œæ¨¡å¼å·²æ›´æ–°');
    
    // å¦‚æœåˆ‡æ¢åˆ°agentæˆ–k8sæ¨¡å¼ï¼Œæç¤ºé€‰æ‹©é…ç½®
    if (newMode === 'agent' && !agentPoolId) {
      toast.info('è¯·é€‰æ‹©Agent Pool');
    } else if (newMode === 'k8s' && !k8sConfigId) {
      toast.info('è¯·é€‰æ‹©K8sé…ç½®');
    }
  } catch (error) {
    toast.error(`æ›´æ–°å¤±è´¥: ${error.message}`);
    // ä¿æŒåŸå€¼
  }
};
```

#### 1.3 è‡ªåŠ¨åŒ–é…ç½®

**å­—æ®µ**:
- **Apply Method** (Applyæ–¹å¼) - Manual/Auto
- **Auto Destroy** (è‡ªåŠ¨é”€æ¯) - å¼€å…³

**å¸ƒå±€**:
```tsx
<div className={styles.section}>
  <h2 className={styles.sectionTitle}>è‡ªåŠ¨åŒ–é…ç½®</h2>
  
  <div className={styles.field}>
    <label className={styles.label}>Applyæ–¹å¼</label>
    <select
      value={applyMethod}
      onChange={handleApplyMethodChange}
      className={styles.select}
    >
      <option value="manual">Manual - æ‰‹åŠ¨å®¡æ‰¹</option>
      <option value="auto">Auto - è‡ªåŠ¨æ‰§è¡Œ</option>
    </select>
    <div className={styles.hint}>
      {applyMethod === 'manual' 
        ? 'PlanæˆåŠŸåéœ€è¦æ‰‹åŠ¨å®¡æ‰¹æ‰èƒ½æ‰§è¡ŒApply'
        : 'PlanæˆåŠŸåè‡ªåŠ¨æ‰§è¡ŒApplyï¼Œæ— éœ€äººå·¥å¹²é¢„'
      }
    </div>
  </div>
  
  <div className={styles.field}>
    <div className={styles.switchField}>
      <div className={styles.switchLabel}>
        <span>è‡ªåŠ¨é”€æ¯</span>
        <Switch
          checked={autoDestroy}
          onChange={handleAutoDestroyChange}
        />
      </div>
      <div className={styles.hint}>
        åˆ é™¤Workspaceæ—¶è‡ªåŠ¨é”€æ¯æ‰€æœ‰ç®¡ç†çš„èµ„æº
      </div>
    </div>
  </div>
  
  {autoDestroy && (
    <div className={styles.warning}>
      <span className={styles.warningIcon}></span>
      <span>å¯ç”¨è‡ªåŠ¨é”€æ¯åï¼Œåˆ é™¤Workspaceå°†ä¸å¯æ¢å¤åœ°é”€æ¯æ‰€æœ‰èµ„æº</span>
    </div>
  )}
</div>
```

#### 1.4 ç”¨æˆ·ç•Œé¢

**å­—æ®µ**:
- **Structured Run Output** (ç»“æ„åŒ–è¾“å‡º) - å¼€å…³
- **Console UI** (æ§åˆ¶å°UI) - å¼€å…³

**å¸ƒå±€**:
```tsx
<div className={styles.section}>
  <h2 className={styles.sectionTitle}>ç”¨æˆ·ç•Œé¢</h2>
  
  <div className={styles.field}>
    <div className={styles.switchField}>
      <div className={styles.switchLabel}>
        <span>ç»“æ„åŒ–è¿è¡Œè¾“å‡º</span>
        <Switch
          checked={structuredOutput}
          onChange={handleStructuredOutputChange}
        />
      </div>
      <div className={styles.hint}>
        ä»¥JSONæ ¼å¼æ˜¾ç¤ºTerraformè¾“å‡ºï¼Œä¾¿äºè§£æå’Œå¤„ç†
      </div>
    </div>
  </div>
  
  <div className={styles.field}>
    <div className={styles.switchField}>
      <div className={styles.switchLabel}>
        <span>æ§åˆ¶å°UI</span>
        <Switch
          checked={consoleUI}
          onChange={handleConsoleUIChange}
        />
      </div>
      <div className={styles.hint}>
        æ˜¾ç¤ºåŸå§‹Terraformæ§åˆ¶å°è¾“å‡º
      </div>
    </div>
  </div>
</div>
```

### 2. é”å®šè®¾ç½® (Locking)

**ç”¨é€”**: é˜²æ­¢å¹¶å‘ä¿®æ”¹ï¼Œä¿æŠ¤Workspace

**å¸ƒå±€**:
```tsx
<div className={styles.section}>
  <h2 className={styles.sectionTitle}>Workspaceé”å®š</h2>
  
  <div className={styles.lockStatus}>
    <div className={styles.statusBadge}>
      {isLocked ? (
        <>
          <span className={styles.lockedIcon}>ğŸ”’</span>
          <span>å·²é”å®š</span>
        </>
      ) : (
        <>
          <span className={styles.unlockedIcon}>ğŸ”“</span>
          <span>æœªé”å®š</span>
        </>
      )}
    </div>
    
    {isLocked && (
      <div className={styles.lockInfo}>
        <div>é”å®šè€…: {lockedBy}</div>
        <div>é”å®šæ—¶é—´: {formatDate(lockedAt)}</div>
        <div>åŸå› : {lockReason || 'æ— '}</div>
      </div>
    )}
  </div>
  
  <div className={styles.field}>
    <div className={styles.switchField}>
      <div className={styles.switchLabel}>
        <span>é”å®šæ­¤Workspace</span>
        <Switch
          checked={isLocked}
          onChange={handleLockToggle}
          disabled={isLocked && !canUnlock}
        />
      </div>
      <div className={styles.hint}>
        é”å®šåå°†é˜»æ­¢æ‰€æœ‰Planå’ŒApplyæ“ä½œ
      </div>
    </div>
  </div>
  
  {showLockReason && (
    <div className={styles.field}>
      <label className={styles.label}>é”å®šåŸå› </label>
      <textarea
        value={lockReason}
        onChange={(e) => setLockReason(e.target.value)}
        className={styles.textarea}
        rows={2}
        placeholder="è¯´æ˜é”å®šåŸå› ..."
      />
    </div>
  )}
  
  <div className={styles.actions}>
    {isLocked ? (
      <button
        onClick={handleUnlock}
        className={styles.dangerButton}
        disabled={!canUnlock}
      >
        è§£é”Workspace
      </button>
    ) : (
      <button
        onClick={handleLock}
        className={styles.primaryButton}
      >
        é”å®šWorkspace
      </button>
    )}
  </div>
</div>
```

**é”å®šé€»è¾‘**:
```typescript
const handleLock = async () => {
  if (!lockReason.trim()) {
    toast.warning('è¯·è¾“å…¥é”å®šåŸå› ');
    return;
  }
  
  try {
    await api.post(`/workspaces/${workspaceId}/lock`, {
      reason: lockReason
    });
    
    setIsLocked(true);
    setLockedBy(currentUser.email);
    setLockedAt(new Date().toISOString());
    toast.success('Workspaceå·²é”å®š');
  } catch (error) {
    toast.error(`é”å®šå¤±è´¥: ${error.message}`);
  }
};

const handleUnlock = async () => {
  const confirmed = await confirmDialog({
    title: 'è§£é”Workspace',
    message: 'ç¡®å®šè¦è§£é”æ­¤Workspaceå—ï¼Ÿè§£é”åå…¶ä»–ç”¨æˆ·å¯ä»¥æ‰§è¡ŒPlanå’ŒApplyæ“ä½œã€‚',
    confirmText: 'è§£é”',
    cancelText: 'å–æ¶ˆ'
  });
  
  if (!confirmed) return;
  
  try {
    await api.post(`/workspaces/${workspaceId}/unlock`);
    
    setIsLocked(false);
    setLockReason('');
    toast.success('Workspaceå·²è§£é”');
  } catch (error) {
    toast.error(`è§£é”å¤±è´¥: ${error.message}`);
  }
};
```

### 3. é€šçŸ¥è®¾ç½® (Notifications)

**ç”¨é€”**: é…ç½®Webhooké€šçŸ¥

**å¸ƒå±€**:
```tsx
<div className={styles.section}>
  <h2 className={styles.sectionTitle}>é€šçŸ¥è®¾ç½®</h2>
  
  <div className={styles.sectionHeader}>
    <p className={styles.sectionDescription}>
      é…ç½®Webhookä»¥åœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶æ¥æ”¶é€šçŸ¥
    </p>
    <button
      onClick={handleAddWebhook}
      className={styles.addButton}
    >
      + æ·»åŠ Webhook
    </button>
  </div>
  
  {webhooks.length === 0 ? (
    <div className={styles.empty}>
      <div className={styles.emptyIcon}>ğŸ””</div>
      <div className={styles.emptyText}>æš‚æ— Webhooké…ç½®</div>
      <div className={styles.emptyHint}>
        ç‚¹å‡»"æ·»åŠ Webhook"åˆ›å»ºç¬¬ä¸€ä¸ªé€šçŸ¥é…ç½®
      </div>
    </div>
  ) : (
    <div className={styles.webhookList}>
      {webhooks.map(webhook => (
        <div key={webhook.id} className={styles.webhookCard}>
          <div className={styles.webhookHeader}>
            <h4 className={styles.webhookName}>{webhook.name}</h4>
            <div className={styles.webhookActions}>
              <button
                onClick={() => handleTestWebhook(webhook.id)}
                className={styles.testButton}
              >
                æµ‹è¯•
              </button>
              <button
                onClick={() => handleEditWebhook(webhook.id)}
                className={styles.editButton}
              >
                ç¼–è¾‘
              </button>
              <button
                onClick={() => handleDeleteWebhook(webhook.id)}
                className={styles.deleteButton}
              >
                åˆ é™¤
              </button>
            </div>
          </div>
          
          <div className={styles.webhookDetails}>
            <div className={styles.webhookUrl}>
              <span className={styles.label}>URL:</span>
              <code className={styles.code}>{webhook.url}</code>
            </div>
            
            <div className={styles.webhookEvents}>
              <span className={styles.label}>äº‹ä»¶:</span>
              <div className={styles.eventTags}>
                {webhook.events.map(event => (
                  <span key={event} className={styles.eventTag}>
                    {eventLabels[event]}
                  </span>
                ))}
              </div>
            </div>
            
            <div className={styles.webhookStatus}>
              <span className={styles.label}>çŠ¶æ€:</span>
              <span className={`${styles.statusBadge} ${webhook.enabled ? styles.enabled : styles.disabled}`}>
                {webhook.enabled ? 'å¯ç”¨' : 'ç¦ç”¨'}
              </span>
            </div>
          </div>
        </div>
      ))}
    </div>
  )}
</div>
```

**Webhookäº‹ä»¶ç±»å‹**:
```typescript
const eventLabels = {
  'run.created': 'Runåˆ›å»º',
  'run.planning': 'Planå¼€å§‹',
  'run.planned': 'Planå®Œæˆ',
  'run.applying': 'Applyå¼€å§‹',
  'run.applied': 'Applyå®Œæˆ',
  'run.errored': 'Runå¤±è´¥',
  'run.cancelled': 'Runå–æ¶ˆ',
  'drift.detected': 'Driftæ£€æµ‹',
  'state.updated': 'Stateæ›´æ–°',
  'workspace.locked': 'Workspaceé”å®š',
  'workspace.unlocked': 'Workspaceè§£é”'
};
```

**æ·»åŠ Webhookå¯¹è¯æ¡†**:
```tsx
<ConfirmDialog
  isOpen={isWebhookDialogOpen}
  onClose={() => setIsWebhookDialogOpen(false)}
  onConfirm={handleSaveWebhook}
  title={editingWebhook ? 'ç¼–è¾‘Webhook' : 'æ·»åŠ Webhook'}
  confirmText="ä¿å­˜"
  cancelText="å–æ¶ˆ"
>
  <form className={styles.webhookForm}>
    <div className={styles.field}>
      <label className={styles.label}>
        åç§° <span className={styles.required}>*</span>
      </label>
      <input
        type="text"
        value={webhookForm.name}
        onChange={(e) => setWebhookForm({...webhookForm, name: e.target.value})}
        placeholder="ä¾‹å¦‚: Slacké€šçŸ¥"
      />
    </div>
    
    <div className={styles.field}>
      <label className={styles.label}>
        Webhook URL <span className={styles.required}>*</span>
      </label>
      <input
        type="url"
        value={webhookForm.url}
        onChange={(e) => setWebhookForm({...webhookForm, url: e.target.value})}
        placeholder="https://hooks.slack.com/services/..."
      />
    </div>
    
    <div className={styles.field}>
      <label className={styles.label}>
        è§¦å‘äº‹ä»¶ <span className={styles.required}>*</span>
      </label>
      <div className={styles.checkboxGroup}>
        {Object.entries(eventLabels).map(([event, label]) => (
          <label key={event} className={styles.checkbox}>
            <input
              type="checkbox"
              checked={webhookForm.events.includes(event)}
              onChange={(e) => handleEventToggle(event, e.target.checked)}
            />
            <span>{label}</span>
          </label>
        ))}
      </div>
    </div>
    
    <div className={styles.field}>
      <label className={styles.switchLabel}>
        <span>å¯ç”¨</span>
        <Switch
          checked={webhookForm.enabled}
          onChange={(checked) => setWebhookForm({...webhookForm, enabled: checked})}
        />
      </label>
    </div>
  </form>
</ConfirmDialog>
```

### 4. å›¢é˜Ÿè®¿é—® (Team Access)

**ç”¨é€”**: ç®¡ç†å›¢é˜Ÿæˆå‘˜è®¿é—®æƒé™

**æƒé™çº§åˆ«**:
- **Admin**: å®Œå…¨æ§åˆ¶ï¼ˆåŒ…æ‹¬åˆ é™¤Workspaceï¼‰
- **Write**: å¯ä»¥è¿è¡ŒPlan/Applyï¼Œç®¡ç†å˜é‡
- **Read**: åªè¯»è®¿é—®

**å¸ƒå±€**:
```tsx
<div className={styles.section}>
  <h2 className={styles.sectionTitle}>å›¢é˜Ÿè®¿é—®</h2>
  
  <div className={styles.sectionHeader}>
    <p className={styles.sectionDescription}>
      ç®¡ç†å›¢é˜Ÿæˆå‘˜å¯¹æ­¤Workspaceçš„è®¿é—®æƒé™
    </p>
    <button
      onClick={handleAddMember}
      className={styles.addButton}
    >
      + æ·»åŠ æˆå‘˜
    </button>
  </div>
  
  <div className={styles.memberList}>
    <table className={styles.memberTable}>
      <thead>
        <tr>
          <th>æˆå‘˜</th>
          <th>æƒé™</th>
          <th>æ·»åŠ æ—¶é—´</th>
          <th>æ“ä½œ</th>
        </tr>
      </thead>
      <tbody>
        {members.map(member => (
          <tr key={member.id}>
            <td>
              <div className={styles.memberInfo}>
                <div className={styles.memberAvatar}>
                  {member.name.charAt(0).toUpperCase()}
                </div>
                <div>
                  <div className={styles.memberName}>{member.name}</div>
                  <div className={styles.memberEmail}>{member.email}</div>
                </div>
              </div>
            </td>
            <td>
              <select
                value={member.role}
                onChange={(e) => handleRoleChange(member.id, e.target.value)}
                className={styles.roleSelect}
                disabled={member.id === currentUser.id}
              >
                <option value="admin">Admin</option>
                <option value="write">Write</option>
                <option value="read">Read</option>
              </select>
            </td>
            <td>{formatDate(member.added_at)}</td>
            <td>
              {member.id !== currentUser.id && (
                <button
                  onClick={() => handleRemoveMember(member.id)}
                  className={styles.removeButton}
                >
                  ç§»é™¤
                </button>
              )}
            </td>
          </tr>
        ))}
      </tbody>
    </table>
  </div>
</div>
```

**æ·»åŠ æˆå‘˜å¯¹è¯æ¡†**:
```tsx
<ConfirmDialog
  isOpen={isMemberDialogOpen}
  onClose={() => setIsMemberDialogOpen(false)}
  onConfirm={handleSaveMember}
  title="æ·»åŠ å›¢é˜Ÿæˆå‘˜"
  confirmText="æ·»åŠ "
  cancelText="å–æ¶ˆ"
>
  <form className={styles.memberForm}>
    <div className={styles.field}>
      <label className={styles.label}>
        ç”¨æˆ· <span className={styles.required}>*</span>
      </label>
      <select
        value={memberForm.userId}
        onChange={(e) => setMemberForm({...memberForm, userId: e.target.value})}
        className={styles.select}
      >
        <option value="">é€‰æ‹©ç”¨æˆ·</option>
        {availableUsers.map(user => (
          <option key={user.id} value={user.id}>
            {user.name} ({user.email})
          </option>
        ))}
      </select>
    </div>
    
    <div className={styles.field}>
      <label className={styles.label}>
        æƒé™ <span className={styles.required}>*</span>
      </label>
      <select
        value={memberForm.role}
        onChange={(e) => setMemberForm({...memberForm, role: e.target.value})}
        className={styles.select}
      >
        <option value="read">Read - åªè¯»è®¿é—®</option>
        <option value="write">Write - å¯è¿è¡ŒPlan/Apply</option>
        <option value="admin">Admin - å®Œå…¨æ§åˆ¶</option>
      </select>
      
      <div className={styles.roleDescription}>
        {roleDescriptions[memberForm.role]}
      </div>
    </div>
  </form>
</ConfirmDialog>
```

### 5. å±é™©åŒºåŸŸ (Danger Zone)

**ç”¨é€”**: åˆ é™¤Workspaceç­‰å±é™©æ“ä½œ

**å¸ƒå±€**:
```tsx
<div className={styles.section}>
  <h2 className={`${styles.sectionTitle} ${styles.danger}`}>
    å±é™©åŒºåŸŸ
  </h2>
  
  <div className={styles.dangerZone}>
    <div className={styles.dangerItem}>
      <div className={styles.dangerInfo}>
        <h4 className={styles.dangerTitle}>åˆ é™¤æ­¤Workspace</h4>
        <p className={styles.dangerDescription}>
          åˆ é™¤åå°†æ— æ³•æ¢å¤ã€‚{autoDestroy ? 'æ‰€æœ‰ç®¡ç†çš„èµ„æºå°†è¢«é”€æ¯ã€‚' : 'è¯·å…ˆæ‰‹åŠ¨é”€æ¯èµ„æºã€‚'}
        </p>
      </div>
      <button
        onClick={handleDeleteWorkspace}
        className={styles.dangerButton}
        disabled={isLocked}
      >
        åˆ é™¤Workspace
      </button>
    </div>
    
    {isLocked && (
      <div className={styles.dangerWarning}>
        <span className={styles.warningIcon}></span>
        <span>Workspaceå·²é”å®šï¼Œè¯·å…ˆè§£é”æ‰èƒ½åˆ é™¤</span>
      </div>
    )}
  </div>
</div>
```

**åˆ é™¤ç¡®è®¤æµç¨‹**:
```typescript
const handleDeleteWorkspace = async () => {
  // ç¬¬ä¸€æ¬¡ç¡®è®¤
  const confirmed1 = await confirmDialog({
    title: 'åˆ é™¤Workspace',
    message: `ç¡®å®šè¦åˆ é™¤ "${workspaceName}" å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚`,
    confirmText: 'ç»§ç»­',
    cancelText: 'å–æ¶ˆ'
  });
  
  if (!confirmed1) return;
  
  // ç¬¬äºŒæ¬¡ç¡®è®¤ï¼ˆè¾“å…¥åç§°ï¼‰
  const confirmed2 = await confirmDialog({
    title: 'ç¡®è®¤åˆ é™¤',
    message: (
      <div>
        <p>è¯·è¾“å…¥Workspaceåç§°ä»¥ç¡®è®¤åˆ é™¤ï¼š</p>
        <input
          type="text"
          placeholder={workspaceName}
          onChange={(e) => setDeleteConfirmName(e.target.value)}
          className={styles.confirmInput}
        />
      </div>
    ),
    confirmText: 'åˆ é™¤',
    cancelText: 'å–æ¶ˆ',
    confirmDisabled: deleteConfirmName !== workspaceName
  });
  
  if (!confirmed2) return;
  
  try {
    await api.delete(`/workspaces/${workspaceId}`);
    toast.success('Workspaceå·²åˆ é™¤');
    navigate('/workspaces');
  } catch (error) {
    toast.error(`åˆ é™¤å¤±è´¥: ${error.message}`);
  }
};
```

## ğŸ¨ æ ·å¼è§„èŒƒ

### é¢œè‰²å®šä¹‰
```css
/* è®¾ç½®é¡µé¢ä¸“ç”¨é¢œè‰² */
--color-danger: #ef4444;
--color-danger-bg: #fee2e2;
--color-warning: #f59e0b;
--color-warning-bg: #fef3c7;
--color-success: #10b981;
--color-success-bg: #d1fae5;
```

### ç»„ä»¶æ ·å¼
```css
.section {
  background: white;
  border-radius: var(--radius-lg);
  padding: var(--spacing-xl);
  margin-bottom: var(--spacing-lg);
  box-shadow: var(--shadow-sm);
}

.sectionTitle {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-gray-900);
  margin-bottom: var(--spacing-lg);
}

.sectionTitle.danger {
  color: var(--color-danger);
}

.field {
  margin-bottom: var(--spacing-lg);
}

.label {
  display: block;
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-gray-700);
  margin-bottom: var(--spacing-xs);
}

.required {
  color: var(--color-danger);
}

.hint {
  font-size: var(--font-size-xs);
  color: var(--color-gray-500);
  margin-top: var(--spacing-xs);
}

.error {
  font-size: var(--font-size-xs);
  color: var(--color-danger);
  margin-top: var(--spacing-xs);
}

.warning {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md);
  background: var(--color-warning-bg);
  border: 1px solid var(--color-warning);
  border-radius: var(--radius-md);
  margin-top: var(--spacing-md);
}

.warningIcon {
  font-size: var(--font-size-lg);
}

.dangerZone {
  border: 2px solid var(--color-danger);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
}

.dangerItem {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.dangerTitle {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--color-danger);
  margin-bottom: var(--spacing-xs);
}

.dangerDescription {
  font-size: var(--font-size-sm);
  color: var(--color-gray-600);
}

.dangerButton {
  padding: var(--spacing-sm) var(--spacing-lg);
  background: var(--color-danger);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all 0.2s;
}

.dangerButton:hover:not(:disabled) {
  background: #dc2626;
}

.dangerButton:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
```

## ğŸ“± å“åº”å¼è®¾è®¡

### ç§»åŠ¨ç«¯é€‚é…
```css
@media (max-width: 768px) {
  .section {
    padding: var(--spacing-md);
  }
  
  .dangerItem {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--spacing-md);
  }
  
  .memberTable {
    display: block;
    overflow-x: auto;
  }
}
```

## ğŸ” æƒé™æ§åˆ¶

### æƒé™çŸ©é˜µ

| è®¾ç½®é¡¹ | Read | Write | Admin |
|--------|------|-------|-------|
| æŸ¥çœ‹è®¾ç½® |  |  |  |
| ä¿®æ”¹åŸºæœ¬ä¿¡æ¯ | âŒ | âŒ |  |
| ä¿®æ”¹æ‰§è¡Œé…ç½® | âŒ | âŒ |  |
| ä¿®æ”¹è‡ªåŠ¨åŒ–é…ç½® | âŒ | âŒ |  |
| é”å®š/è§£é” | âŒ |  |  |
| ç®¡ç†Webhook | âŒ | âŒ |  |
| ç®¡ç†å›¢é˜Ÿæˆå‘˜ | âŒ | âŒ |  |
| åˆ é™¤Workspace | âŒ | âŒ |  |

### æƒé™æ£€æŸ¥å®ç°
```typescript
const canEditSettings = userRole === 'admin';
const canLock = ['write', 'admin'].includes(userRole);
const canDelete = userRole === 'admin';

// æ ¹æ®æƒé™æ˜¾ç¤º/éšè—UI
{canEditSettings && (
  <div className={styles.field}>
    {/* ç¼–è¾‘è¡¨å• */}
  </div>
)}

{!canEditSettings && (
  <div className={styles.readOnly}>
    {/* åªè¯»æ˜¾ç¤º */}
  </div>
)}
```

## ğŸ“Š æ•°æ®æ¨¡å‹

### WorkspaceSettingsæ¥å£
```typescript
interface WorkspaceSettings {
  // åŸºæœ¬ä¿¡æ¯
  name: string;
  description: string;
  tags: string[];
  
  // æ‰§è¡Œé…ç½®
  execution_mode: 'local' | 'agent' | 'k8s';
  agent_pool_id?: number;
  k8s_config_id?: number;
  terraform_version: string;
  working_directory: string;
  
  // è‡ªåŠ¨åŒ–é…ç½®
  auto_apply: boolean;
  auto_destroy: boolean;
  
  // ç”¨æˆ·ç•Œé¢
  structured_output: boolean;
  console_ui: boolean;
  
  // é”å®šçŠ¶æ€
  is_locked: boolean;
  locked_by?: string;
  locked_at?: string;
  lock_reason?: string;
  
  // é€šçŸ¥é…ç½®
  webhooks: Webhook[];
  
  // å›¢é˜Ÿè®¿é—®
  members: WorkspaceMember[];
}

interface Webhook {
  id: number;
  name: string;
  url: string;
  events: string[];
  enabled: boolean;
  created_at: string;
}

interface WorkspaceMember {
  id: number;
  name: string;
  email: string;
  role: 'admin' | 'write' | 'read';
  added_at: string;
}
```

## ğŸ”„ APIç«¯ç‚¹

### è®¾ç½®ç›¸å…³API
```typescript
// è·å–è®¾ç½®
GET /api/v1/workspaces/:id/settings

// æ›´æ–°åŸºæœ¬ä¿¡æ¯
PATCH /api/v1/workspaces/:id
{
  "name": "new-name",
  "description": "new description",
  "tags": ["tag1", "tag2"]
}

// æ›´æ–°æ‰§è¡Œé…ç½®
PATCH /api/v1/workspaces/:id
{
  "execution_mode": "agent",
  "agent_pool_id": 1,
  "terraform_version": "1.6.0"
}

// é”å®š/è§£é”
POST /api/v1/workspaces/:id/lock
{
  "reason": "Maintenance"
}

POST /api/v1/workspaces/:id/unlock

// Webhookç®¡ç†
GET /api/v1/workspaces/:id/webhooks
POST /api/v1/workspaces/:id/webhooks
PUT /api/v1/workspaces/:id/webhooks/:webhook_id
DELETE /api/v1/workspaces/:id/webhooks/:webhook_id
POST /api/v1/workspaces/:id/webhooks/:webhook_id/test

// å›¢é˜Ÿæˆå‘˜ç®¡ç†
GET /api/v1/workspaces/:id/members
POST /api/v1/workspaces/:id/members
PUT /api/v1/workspaces/:id/members/:member_id
DELETE /api/v1/workspaces/:id/members/:member_id

// åˆ é™¤Workspace
DELETE /api/v1/workspaces/:id
```

## ğŸ§ª æµ‹è¯•åœºæ™¯

### åŠŸèƒ½æµ‹è¯•
1. **åŸºæœ¬ä¿¡æ¯æ›´æ–°**
   - ä¿®æ”¹åç§°ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
   - ä¿®æ”¹æè¿°
   - æ·»åŠ /åˆ é™¤æ ‡ç­¾

2. **æ‰§è¡Œæ¨¡å¼åˆ‡æ¢**
   - Local â†’ Agent
   - Agent â†’ K8s
   - K8s â†’ Local
   - éªŒè¯é…ç½®æ¸…é™¤

3. **é”å®šåŠŸèƒ½**
   - é”å®šWorkspace
   - å°è¯•æ‰§è¡ŒPlanï¼ˆåº”å¤±è´¥ï¼‰
   - è§£é”Workspace
   - éªŒè¯æƒé™æ§åˆ¶

4. **Webhookç®¡ç†**
   - æ·»åŠ Webhook
   - ç¼–è¾‘Webhook
   - æµ‹è¯•Webhook
   - åˆ é™¤Webhook

5. **å›¢é˜Ÿè®¿é—®**
   - æ·»åŠ æˆå‘˜
   - ä¿®æ”¹æƒé™
   - ç§»é™¤æˆå‘˜
   - éªŒè¯æƒé™ç”Ÿæ•ˆ

6. **åˆ é™¤Workspace**
   - é”å®šçŠ¶æ€ä¸‹åˆ é™¤ï¼ˆåº”å¤±è´¥ï¼‰
   - æ­£å¸¸åˆ é™¤æµç¨‹
   - éªŒè¯äºŒæ¬¡ç¡®è®¤

### è¾¹ç•Œæµ‹è¯•
- åç§°é‡å¤
- æ— æ•ˆçš„æ‰§è¡Œæ¨¡å¼é…ç½®
- æƒé™ä¸è¶³çš„æ“ä½œ
- ç½‘ç»œé”™è¯¯å¤„ç†

## ğŸ“ å®ç°æ¸…å•

### åç«¯ä»»åŠ¡
- [x] åˆ›å»ºè®¾ç½®APIç«¯ç‚¹
- [x] å®ç°æƒé™æ£€æŸ¥ä¸­é—´ä»¶
- [ ] Webhookç®¡ç†æœåŠ¡
- [ ] å›¢é˜Ÿæˆå‘˜ç®¡ç†æœåŠ¡
- [x] é”å®šæœºåˆ¶å®ç°
- [x] åˆ é™¤Workspaceé€»è¾‘

### å‰ç«¯ä»»åŠ¡
- [x] åˆ›å»ºSettingsé¡µé¢ç»„ä»¶ï¼ˆå·¦ä¾§tabå¯¼èˆªï¼‰
- [x] å®ç°General Settingså­é¡µé¢
- [x] å®ç°Lockingå­é¡µé¢
- [ ] å®ç°Notificationså­é¡µé¢ï¼ˆæ ‡è®°ä¸ºComing Soonï¼‰
- [x] å®ç°Destruction and Deletionå­é¡µé¢
- [ ] Webhookç®¡ç†UI
- [ ] å›¢é˜Ÿæˆå‘˜ç®¡ç†UI
- [x] æƒé™æ§åˆ¶é€»è¾‘
- [x] è¡¨å•éªŒè¯
- [x] é”™è¯¯å¤„ç†
- [x] æ ·å¼å®ç°ï¼ˆå‚è€ƒTFEè®¾è®¡ï¼‰
- [x] æ·»åŠ ä¿å­˜æŒ‰é’®å’Œæœªä¿å­˜æç¤º

### æµ‹è¯•ä»»åŠ¡
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] E2Eæµ‹è¯•
- [ ] æƒé™æµ‹è¯•

## ğŸ¯ å®ç°äº®ç‚¹

### 1. å·¦ä¾§Tabå¯¼èˆª
- å‚è€ƒTFEå’Œå…¨å±€ç³»ç»Ÿç®¡ç†çš„è®¾è®¡
- æ¸…æ™°çš„å¯¼èˆªç»“æ„ï¼Œæ˜“äºæ‰©å±•
- æ”¯æŒURLå‚æ•°ï¼ˆsectionï¼‰åˆ‡æ¢

### 2. ç»Ÿä¸€çš„ä¿å­˜æœºåˆ¶
- General Settingsé¡µé¢æœ‰ç»Ÿä¸€çš„"Save Settings"æŒ‰é’®
- å®æ—¶è·Ÿè¸ªè¡¨å•ä¿®æ”¹çŠ¶æ€ï¼ˆhasChangesï¼‰
- æ˜¾ç¤º"You have unsaved changes"æç¤º
- ä¿å­˜æˆåŠŸåè‡ªåŠ¨é‡æ–°åŠ è½½æ•°æ®

### 3. è¡¨å•éªŒè¯
- å®æ—¶éªŒè¯ï¼ˆå¦‚åç§°æ ¼å¼ï¼‰
- æ¸…æ™°çš„é”™è¯¯æç¤º
- é˜²æ­¢é‡å¤æäº¤

### 4. ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- æ‰§è¡Œæ¨¡å¼åˆ‡æ¢éœ€è¦ç¡®è®¤
- åˆ é™¤æ“ä½œéœ€è¦è¾“å…¥åç§°ç¡®è®¤
- é”å®šçŠ¶æ€æ¸…æ™°æ˜¾ç¤º
- Coming Sooné¡µé¢å‹å¥½æç¤º

### 5. å“åº”å¼è®¾è®¡
- æ¡Œé¢ç«¯ï¼šå·¦ä¾§å›ºå®šå¯¼èˆª + å³ä¾§å†…å®¹
- ç§»åŠ¨ç«¯ï¼šä¸Šä¸‹å¸ƒå±€ï¼Œå¯¼èˆªåœ¨é¡¶éƒ¨
- è‡ªé€‚åº”è¡¨å•å¸ƒå±€

---

**ç›¸å…³æ–‡æ¡£**:
- [11-frontend-design.md](./11-frontend-design.md) - å‰ç«¯è®¾è®¡æ€»è§ˆ
- [12-global-configuration.md](./12-global-configuration.md) - å…¨å±€é…ç½®
- [08-database-design.md](./08-database-design.md) - æ•°æ®åº“è®¾è®¡
- [09-api-specification.md](./09-api-specification.md) - APIè§„èŒƒ
- [../frontend-form-style-guide.md](../frontend-form-style-guide.md) - è¡¨å•è§„èŒƒ
