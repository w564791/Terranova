# èµ„æºç‰ˆæœ¬å¯¹æ¯”å’Œå›æ»šåŠŸèƒ½ - æœ€ç»ˆå®ç°æ€»ç»“

## æ¦‚è¿°
æˆåŠŸå®ç°äº†èµ„æºç‰ˆæœ¬å†å²æŸ¥çœ‹ã€ç‰ˆæœ¬å¯¹æ¯”ã€URLçŠ¶æ€åŒæ­¥å’Œç‰ˆæœ¬å›æ»šåŠŸèƒ½ï¼Œæä¾›å®Œæ•´çš„ç‰ˆæœ¬ç®¡ç†èƒ½åŠ›ã€‚

## å®ç°çš„åŠŸèƒ½

### 1. å†å²ç‰ˆæœ¬æŸ¥çœ‹ 
**åŠŸèƒ½æè¿°**ï¼š
- åœ¨èµ„æºé…ç½®åŒºåŸŸå³ä¸Šè§’æ·»åŠ ç‰ˆæœ¬ä¸‹æ‹‰èœå•
- ç”¨æˆ·å¯ä»¥åˆ‡æ¢æŸ¥çœ‹ä¸åŒç‰ˆæœ¬çš„é…ç½®
- ä¸‹æ–¹é…ç½®å†…å®¹è‡ªåŠ¨æ›´æ–°
- æ”¯æŒè¡¨å•è§†å›¾å’ŒJSONè§†å›¾åˆ‡æ¢

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// ç‰ˆæœ¬åˆ‡æ¢
const handleVersionChange = (version: number) => {
  setSelectedVersion(version);
  // æ›´æ–°URLå‚æ•°
  const newParams = new URLSearchParams(searchParams);
  newParams.set('version', version.toString());
  setSearchParams(newParams, { replace: true });
};

// åŠ è½½ç‰ˆæœ¬æ•°æ®
const loadVersionData = async (version: number) => {
  const versionResponse = await api.get(
    `/workspaces/${id}/resources/${resourceId}/versions/${version}`
  );
  const config = extractModuleConfig(versionDataResponse.tf_code);
  setDisplayData(config);
};
```

### 2. ç‰ˆæœ¬å¯¹æ¯” 
**åŠŸèƒ½æè¿°**ï¼š
- é€‰æ‹©å†å²ç‰ˆæœ¬åï¼Œæ˜¾ç¤º"å¯¹æ¯”ç‰ˆæœ¬"æŒ‰é’®
- ç‚¹å‡»è¿›å…¥å¯¹æ¯”é¡µé¢
- é»˜è®¤å¯¹æ¯”ï¼šé€‰ä¸­ç‰ˆæœ¬ â†’ å½“å‰ç‰ˆæœ¬
- Terraformé£æ ¼çš„å·®å¼‚å±•ç¤º
- ä¿æŒJSONå®Œæ•´æ€§ï¼Œä¸æ‹†æ•£å¤æ‚å¯¹è±¡

**å·®å¼‚å±•ç¤ºç‰¹æ€§**ï¼š
- **å·¦ä¾§è‰²å—å¯¹é½**ï¼š4pxå®½è‰²å—æŒ‡ç¤ºå˜æ›´ç±»å‹
- **ç¬¦å·æŒ‡ç¤ºå™¨**ï¼š+ï¼ˆæ–°å¢ï¼‰ã€-ï¼ˆåˆ é™¤ï¼‰ã€~ï¼ˆä¿®æ”¹ï¼‰ã€â–¶ï¼ˆæœªæ›´æ”¹ï¼‰
- **é¢œè‰²ç¼–ç **ï¼š
  - ç»¿è‰² = æ–°å¢å­—æ®µ
  - çº¢è‰² = åˆ é™¤å­—æ®µ
  - é»„è‰² = ä¿®æ”¹å­—æ®µ
  - ç°è‰² = æœªæ›´æ”¹å­—æ®µ
- **æœªæ›´æ”¹å­—æ®µ**ï¼šé»˜è®¤æŠ˜å æ˜¾ç¤º"Â·Â·Â· 1 unchanged attribute hidden"
- **ç‚¹å‡»å±•å¼€**ï¼šå­—æ®µä½ç½®ä¸å˜ï¼Œåªå±•å¼€å†…å®¹

**å¯¹æ¯”å±•ç¤ºç¤ºä¾‹**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–Œ â–¶ name:  Â·Â·Â· 1 unchanged attribute    â”‚ â† ç°è‰²å—ï¼ŒæŠ˜å 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–Œ ~ tags:                    [modified] â”‚ â† é»„è‰²å—
â”‚     æ—§ç‰ˆæœ¬ï¼š                             â”‚
â”‚     {                                    â”‚
â”‚       "business-line": "ken-aaa",       â”‚
â”‚       "managed-by": "ken-aaa"           â”‚
â”‚     }                                    â”‚
â”‚     æ–°ç‰ˆæœ¬ï¼š                             â”‚
â”‚     {                                    â”‚
â”‚       "business-line": "ken-aaa",       â”‚
â”‚       "cccc": "aaaaa",                  â”‚
â”‚       "managed-by": "ken-aaa"           â”‚
â”‚     }                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–Œ + attach_policy:            [added]   â”‚ â† ç»¿è‰²å—
â”‚     æ–°å¢çš„å€¼ï¼š                           â”‚
â”‚     true                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. URLçŠ¶æ€åŒæ­¥ 
**åŠŸèƒ½æè¿°**ï¼š
- æ‰€æœ‰é¡µé¢çŠ¶æ€åŒæ­¥åˆ°URLå‚æ•°
- å¯åˆ†äº«é“¾æ¥ï¼Œå…¶ä»–äººæ‰“å¼€çœ‹åˆ°ç›¸åŒé¡µé¢
- æ”¯æŒæ·±åº¦é“¾æ¥

**URLå‚æ•°**ï¼š
- `version` - é€‰ä¸­çš„ç‰ˆæœ¬å·
- `mode` - è§†å›¾æ¨¡å¼ï¼ˆcompare=å¯¹æ¯”æ¨¡å¼ï¼‰
- `view` - æ•°æ®è§†å›¾ï¼ˆjson=JSONè§†å›¾ï¼‰

**ç¤ºä¾‹URL**ï¼š
```
# æŸ¥çœ‹v5ç‰ˆæœ¬ï¼ˆè¡¨å•è§†å›¾ï¼‰
/workspaces/1/resources/11?version=5

# æŸ¥çœ‹v5ç‰ˆæœ¬ï¼ˆJSONè§†å›¾ï¼‰
/workspaces/1/resources/11?version=5&view=json

# å¯¹æ¯”v5å’Œå½“å‰ç‰ˆæœ¬
/workspaces/1/resources/11?version=5&mode=compare
```

**æŠ€æœ¯å®ç°**ï¼š
```typescript
// ä»URLåˆå§‹åŒ–çŠ¶æ€
useEffect(() => {
  if (resource && versions.length > 0 && !urlInitialized) {
    const urlVersion = searchParams.get('version');
    const urlMode = searchParams.get('mode');
    const urlDataView = searchParams.get('view');
    // æ¢å¤çŠ¶æ€...
  }
}, [resource, versions, urlInitialized]);

// æ“ä½œæ—¶æ›´æ–°URL
const handleVersionChange = (version: number) => {
  const newParams = new URLSearchParams(searchParams);
  newParams.set('version', version.toString());
  setSearchParams(newParams, { replace: true });
};
```

### 4. ç‰ˆæœ¬å›æ»š 
**åŠŸèƒ½æè¿°**ï¼š
- æŸ¥çœ‹å†å²ç‰ˆæœ¬æ—¶ï¼Œ"ç¼–è¾‘èµ„æº"æŒ‰é’®æ›¿æ¢ä¸º"è®¾ç½®ä¸ºå½“å‰ç‰ˆæœ¬"
- ç‚¹å‡»æ˜¾ç¤ºè‡ªå®šä¹‰ç¡®è®¤å¯¹è¯æ¡†
- ç¡®è®¤åè°ƒç”¨åç«¯APIè¿›è¡Œå›æ»š
- è‡ªåŠ¨åˆ·æ–°æ•°æ®å¹¶åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬

**ç¡®è®¤å¯¹è¯æ¡†è®¾è®¡**ï¼š
- æ ‡é¢˜åŒºåŸŸï¼šçº¢è‰²åŠé€æ˜èƒŒæ™¯ï¼ˆrgba(239, 68, 68, 0.1)ï¼‰
- æ ‡é¢˜æ–‡å­—ï¼šçº¢è‰²ï¼ˆè­¦ç¤ºï¼‰
- ç¡®è®¤æŒ‰é’®ï¼šè“è‰²èƒŒæ™¯ï¼ˆ#3b82f6ï¼‰
- å–æ¶ˆæŒ‰é’®ï¼šç™½è‰²èƒŒæ™¯
- åŠ¨ç”»æ•ˆæœï¼šslideIn 0.2s

**APIè°ƒç”¨**ï¼š
```typescript
POST /api/v1/workspaces/:id/resources/:resource_id/versions/:version/rollback

Response:
{
  "message": "Resource rolled back successfully",
  "version": {
    "id": 123,
    "version": 13,
    "tf_code": {...},
    "change_summary": "å›æ»šåˆ°ç‰ˆæœ¬ v5",
    "is_latest": true
  }
}
```

**å›æ»šæµç¨‹**ï¼š
1. ç”¨æˆ·åˆ‡æ¢åˆ°å†å²ç‰ˆæœ¬v5
2. ç‚¹å‡»"è®¾ç½®ä¸ºå½“å‰ç‰ˆæœ¬"æŒ‰é’®
3. æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†ï¼ˆçº¢è‰²è­¦ç¤ºèƒŒæ™¯ï¼‰
4. ç”¨æˆ·ç‚¹å‡»"ç¡®è®¤å›æ»š"ï¼ˆè“è‰²æŒ‰é’®ï¼‰
5. è°ƒç”¨åç«¯API
6. åç«¯åˆ›å»ºæ–°ç‰ˆæœ¬v13ï¼ˆå†…å®¹=v5ï¼‰
7. å‰ç«¯é‡æ–°åŠ è½½æ•°æ®
8. è‡ªåŠ¨åˆ‡æ¢åˆ°v13
9. æ¸…ç†URLå‚æ•°

## UIå¸ƒå±€

### æŸ¥çœ‹æ¨¡å¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›Workspace  æŸ¥çœ‹èµ„æº    AWS_tesr-ccd  ken-aaa   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚ èµ„æºä¿¡æ¯å¡ç‰‡                                          â”‚
â”‚                                                      â”‚
â”‚ èµ„æºé…ç½®                                              â”‚
â”‚ [è¡¨å•è§†å›¾] [JSONè§†å›¾]              [v11â–¼] [å¯¹æ¯”ç‰ˆæœ¬] â”‚
â”‚                                      â†‘       â†‘       â”‚
â”‚                                  ç‰ˆæœ¬é€‰æ‹©  å¯¹æ¯”æŒ‰é’®   â”‚
â”‚                                                      â”‚
â”‚ ğŸ“‹ é…ç½®é¢„è§ˆï¼ˆåªè¯»ï¼‰                                   â”‚
â”‚                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [è¿”å›] [è®¾ç½®ä¸ºå½“å‰ç‰ˆæœ¬] â”‚
â”‚                                        â†‘             â”‚
â”‚                                  æŸ¥çœ‹å†å²ç‰ˆæœ¬æ—¶æ˜¾ç¤º   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¯¹æ¯”æ¨¡å¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç‰ˆæœ¬å¯¹æ¯”                                [è¿”å›æŸ¥çœ‹]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â„¹ï¸ å¯¹æ¯” v5 â†’ v12 (å½“å‰ç‰ˆæœ¬)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–Œ â–¶ name:  Â·Â·Â· 1 unchanged attribute hidden        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–Œ ~ tags:                              [modified]   â”‚
â”‚     æ—§ç‰ˆæœ¬ï¼š                                         â”‚
â”‚     { "business-line": "ken-aaa" }                  â”‚
â”‚     æ–°ç‰ˆæœ¬ï¼š                                         â”‚
â”‚     { "business-line": "ken-aaa", "cccc": "aaaaa" } â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–Œ + attach_policy:                      [added]     â”‚
â”‚     æ–°å¢çš„å€¼ï¼š                                       â”‚
â”‚     true                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯å®ç°

### æ ¸å¿ƒçŠ¶æ€ç®¡ç†
```typescript
const [viewMode, setViewMode] = useState<ViewMode>('view');
const [dataViewMode, setDataViewMode] = useState<DataViewMode>('form');
const [versions, setVersions] = useState<Version[]>([]);
const [selectedVersion, setSelectedVersion] = useState<number | null>(null);
const [displayData, setDisplayData] = useState<any>({});
const [diffFields, setDiffFields] = useState<DiffField[]>([]);
const [showRollbackDialog, setShowRollbackDialog] = useState(false);
```

### æ ¸å¿ƒå‡½æ•°
- `loadVersions()` - åŠ è½½ç‰ˆæœ¬åˆ—è¡¨
- `loadVersionData()` - åŠ è½½æŒ‡å®šç‰ˆæœ¬æ•°æ®
- `handleVersionChange()` - å¤„ç†ç‰ˆæœ¬åˆ‡æ¢
- `handleStartCompare()` - å¼€å§‹ç‰ˆæœ¬å¯¹æ¯”
- `handleCompareVersions()` - æ‰§è¡Œç‰ˆæœ¬å¯¹æ¯”
- `calculateDiff()` - è®¡ç®—ç‰ˆæœ¬å·®å¼‚
- `handleRollbackVersion()` - æ˜¾ç¤ºå›æ»šç¡®è®¤å¯¹è¯æ¡†
- `confirmRollback()` - æ‰§è¡Œç‰ˆæœ¬å›æ»š

### æ•°æ®æå–é€»è¾‘
```typescript
const extractModuleConfig = (tfCode: any): any => {
  // å…¼å®¹ module æˆ– modules
  const moduleData = tfCode?.module || tfCode?.modules;
  
  if (!moduleData) return {};
  
  const moduleKeys = Object.keys(moduleData);
  const moduleKey = moduleKeys[0];
  const moduleArray = moduleData[moduleKey];
  
  if (Array.isArray(moduleArray) && moduleArray.length > 0) {
    const { source, ...config } = moduleArray[0];
    return config;
  }
  
  return {};
};
```

## æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
1. `frontend/src/components/ConfirmDialog.tsx` - ç¡®è®¤å¯¹è¯æ¡†ç»„ä»¶
2. `frontend/src/components/ConfirmDialog.module.css` - å¯¹è¯æ¡†æ ·å¼

### ä¿®æ”¹æ–‡ä»¶
1. `frontend/src/pages/ViewResource.tsx` - å®Œæ•´é‡å†™ï¼Œå®ç°æ‰€æœ‰åŠŸèƒ½

### ç§»é™¤æ–‡ä»¶
- ResourceVersionHistoryç»„ä»¶ï¼ˆå¼¹çª—ï¼Œå·²ä¸ä½¿ç”¨ï¼‰
- ResourceVersionDiffç»„ä»¶ï¼ˆå¼¹çª—ï¼Œå·²ä¸ä½¿ç”¨ï¼‰

## æ ·å¼è®¾è®¡

### é¢œè‰²æ–¹æ¡ˆ
```css
/* æ–°å¢å­—æ®µ */
--color-green-500: #22c55e;
--color-green-600: #16a34a;
--color-green-700: #15803d;

/* åˆ é™¤å­—æ®µ */
--color-red-500: #ef4444;
--color-red-600: #dc2626;
--color-red-700: #b91c1c;

/* ä¿®æ”¹å­—æ®µ */
--color-yellow-500: #eab308;
--color-yellow-600: #ca8a04;

/* ä¸»è‰²è°ƒ */
--color-primary: #3b82f6;
--color-primary-dark: #2563eb;
```

### ç¡®è®¤å¯¹è¯æ¡†æ ·å¼
```css
/* æ ‡é¢˜åŒºåŸŸè­¦ç¤ºèƒŒæ™¯ */
.header.warning {
  background: rgba(239, 68, 68, 0.1);
  border-bottom-color: rgba(239, 68, 68, 0.2);
}

/* ç¡®è®¤æŒ‰é’®è“è‰² */
.btnConfirm.warning {
  background: #3b82f6;
  color: white;
}
```

## æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•
1.  ç‰ˆæœ¬åˆ‡æ¢æ˜¯å¦æ­£å¸¸
2.  é…ç½®æ•°æ®æ˜¯å¦æ­£ç¡®æ¸²æŸ“
3.  ç‰ˆæœ¬å¯¹æ¯”æ˜¯å¦å‡†ç¡®
4.  URLå‚æ•°æ˜¯å¦åŒæ­¥
5.  åˆ†äº«é“¾æ¥æ˜¯å¦æœ‰æ•ˆ
6.  ç‰ˆæœ¬å›æ»šæ˜¯å¦æˆåŠŸ
7.  ç¡®è®¤å¯¹è¯æ¡†æ ·å¼æ˜¯å¦æ­£ç¡®

### è¾¹ç•Œæƒ…å†µ
1. åªæœ‰ä¸€ä¸ªç‰ˆæœ¬çš„èµ„æº
2. ç‰ˆæœ¬é—´æ— å·®å¼‚
3. å¤æ‚åµŒå¥—å¯¹è±¡çš„å¯¹æ¯”
4. å¤§é‡å­—æ®µçš„æ€§èƒ½
5. å›æ»šåˆ°å½“å‰ç‰ˆæœ¬
6. ç½‘ç»œé”™è¯¯å¤„ç†

## åç»­ä¼˜åŒ–å»ºè®®

### åŠŸèƒ½å¢å¼º
1. æ”¯æŒç‰ˆæœ¬æ ‡ç­¾/å¤‡æ³¨
2. æ”¯æŒç‰ˆæœ¬æœç´¢å’Œè¿‡æ»¤
3. æ”¯æŒå¯¼å‡ºå¯¹æ¯”æŠ¥å‘Š
4. æ”¯æŒå¹¶æ’å¯¹æ¯”è§†å›¾
5. æ”¯æŒç‰ˆæœ¬æ‰¹é‡æ“ä½œ

### æ€§èƒ½ä¼˜åŒ–
1. ç‰ˆæœ¬åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨
2. å·®å¼‚è®¡ç®—ä¼˜åŒ–
3. å¤§æ–‡ä»¶å¤„ç†ä¼˜åŒ–
4. æ•°æ®ç¼“å­˜ç­–ç•¥

### ç”¨æˆ·ä½“éªŒ
1. æ·»åŠ é”®ç›˜å¿«æ·é”®
2. è®°ä½ç”¨æˆ·çš„è§†å›¾åå¥½
3. æ·»åŠ åŠ è½½åŠ¨ç”»
4. ä¼˜åŒ–é”™è¯¯æç¤º
5. æ·»åŠ æ“ä½œå¼•å¯¼

## æ ¸å¿ƒæ‰§è¡Œæµç¨‹å…¼å®¹æ€§

### ç‰ˆæœ¬å›æ»šåçš„æ‰§è¡Œæµç¨‹
1. ç”¨æˆ·å›æ»šåˆ°å†å²ç‰ˆæœ¬v5
2. ç³»ç»Ÿåˆ›å»ºæ–°ç‰ˆæœ¬v13ï¼ˆå†…å®¹=v5ï¼‰
3. v13æ ‡è®°ä¸ºis_latest=true
4. resource.current_version_idæŒ‡å‘v13
5. æ‰§è¡ŒPlanæ—¶ï¼š
   - è¯»å–resource.current_version
   - è·å–v13çš„tf_code
   - ç”ŸæˆTerraformé…ç½®
   - æ‰§è¡Œterraform plan
6. æ‰§è¡ŒApplyæ—¶ï¼š
   - ä½¿ç”¨v13çš„é…ç½®
   - åº”ç”¨å˜æ›´åˆ°åŸºç¡€è®¾æ–½

### ç‰ˆæœ¬å˜æ›´æ£€æµ‹
- æ¯æ¬¡æ‰§è¡Œå‰æ£€æŸ¥current_version
- å¯¹æ¯”stateä¸­çš„ç‰ˆæœ¬å’Œcurrent_version
- å¦‚æœä¸ä¸€è‡´ï¼Œè¯´æ˜æœ‰é…ç½®å˜æ›´
- æ‰§è¡ŒPlan/Applyæµç¨‹

## æ€»ç»“

æœ¬æ¬¡å®ç°å®Œæˆäº†å®Œæ•´çš„èµ„æºç‰ˆæœ¬ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
-  å†å²ç‰ˆæœ¬æŸ¥çœ‹
-  ç‰ˆæœ¬å¯¹æ¯”ï¼ˆTerraformé£æ ¼ï¼‰
-  URLçŠ¶æ€åŒæ­¥ï¼ˆå¯åˆ†äº«ï¼‰
-  ç‰ˆæœ¬å›æ»šï¼ˆå¸¦ç¡®è®¤å¯¹è¯æ¡†ï¼‰
-  UIä¼˜åŒ–ï¼ˆè‰²å—å¯¹é½ã€æŒ‰é’®ç»Ÿä¸€ï¼‰
-  æ ¸å¿ƒæ‰§è¡Œæµç¨‹å…¼å®¹

æ‰€æœ‰åŠŸèƒ½å·²å®Œæˆå¹¶æµ‹è¯•é€šè¿‡ï¼Œç¬¦åˆUIè®¾è®¡è§„èŒƒï¼Œå¯ä»¥æŠ•å…¥ä½¿ç”¨ã€‚

### å®Œæˆæƒ…å†µ
-  å‰ç«¯åŠŸèƒ½å®Œæ•´å®ç°
-  åç«¯APIå·²å­˜åœ¨
-  UIè®¾è®¡ç¬¦åˆè§„èŒƒ
-  ç”¨æˆ·ä½“éªŒæµç•…
-  ä»£ç è´¨é‡è‰¯å¥½
-  TypeScriptç±»å‹æ£€æŸ¥é€šè¿‡

### å…³é”®æ–‡ä»¶
- `frontend/src/pages/ViewResource.tsx` - ä¸»è¦åŠŸèƒ½å®ç°
- `frontend/src/components/ConfirmDialog.tsx` - ç¡®è®¤å¯¹è¯æ¡†
- `frontend/src/components/ConfirmDialog.module.css` - å¯¹è¯æ¡†æ ·å¼
- `backend/controllers/resource_controller.go` - åç«¯API

### APIç«¯ç‚¹
- `GET /api/v1/workspaces/:id/resources/:resource_id/versions` - ç‰ˆæœ¬åˆ—è¡¨
- `GET /api/v1/workspaces/:id/resources/:resource_id/versions/:version` - è·å–ç‰ˆæœ¬
- `POST /api/v1/workspaces/:id/resources/:resource_id/versions/:version/rollback` - å›æ»šç‰ˆæœ¬
