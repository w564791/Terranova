# Workspaceæ¨¡å—å®Œæ•´æ–‡æ¡£é›†

> **æ–‡æ¡£ç‰ˆæœ¬**: v2.0  
> **æœ€åæ›´æ–°**: 2025-10-09  
> **çŠ¶æ€**: å·²æ•´åˆå†å²éœ€æ±‚å’Œæ–°äº§å“è®¾è®¡

## ğŸ“š æ–‡æ¡£å¯¼èˆª

###  å·²å®Œæˆæ–‡æ¡£

æœ¬æ–‡æ¡£é›†åŒ…å«ä»¥ä¸‹16ä¸ªå®Œæ•´æ–‡æ¡£ï¼š

1. **[00-overview.md](./00-overview.md)** - æ€»è§ˆä¸æ¶æ„
   - ç³»ç»Ÿæ¶æ„è®¾è®¡
   - æ ¸å¿ƒæ¨¡å—ä»‹ç»
   - åŠŸèƒ½ä¼˜å…ˆçº§è§„åˆ’
   
2. **[01-lifecycle.md](./01-lifecycle.md)** - ç”Ÿå‘½å‘¨æœŸä¸çŠ¶æ€æœº
   - å®Œæ•´çŠ¶æ€æœºè®¾è®¡
   - çŠ¶æ€è½¬æ¢è§„åˆ™
   - å¹¶å‘æ§åˆ¶æœºåˆ¶

3. **[02-execution-modes.md](./02-execution-modes.md)** - æ‰§è¡Œæ¨¡å¼æ¦‚è¿°
   - Local/Agent/K8sæ‰§è¡Œæ¨¡å¼å¯¹æ¯”
   - æ‰§è¡Œå™¨æ¥å£è®¾è®¡
   - æ¨¡å¼é€‰æ‹©æŒ‡å—

4. **[02-agent-k8s-implementation.md](./02-agent-k8s-implementation.md)** - Agentå’ŒK8så®ç°è¯¦è§£
   - Agentæ‰§è¡Œæ¨¡å¼å®Œæ•´è®¾è®¡
   - K8sæ‰§è¡Œæ¨¡å¼å®Œæ•´è®¾è®¡
   - Tokenç®¡ç†ç³»ç»Ÿ
   - Agent Poolå’Œé€‰æ‹©ç­–ç•¥
   - ä»»åŠ¡é”æœºåˆ¶è®¾è®¡
   - å®Œæ•´çš„APIæ¥å£è®¾è®¡ï¼ˆ24ä¸ªæ–°æ¥å£ï¼‰

5. **[03-state-management.md](./03-state-management.md)** - Stateç®¡ç†
   - Stateå­˜å‚¨å’Œç‰ˆæœ¬æ§åˆ¶
   - é”æœºåˆ¶å’Œå›æ»š
   - é‡è¯•æœºåˆ¶

6. **[04-task-workflow.md](./04-task-workflow.md)** - ä»»åŠ¡æµç¨‹
   - Plan/Applyä»»åŠ¡æµç¨‹
   - æ’å…¥ä»»åŠ¡è®¾è®¡ï¼ˆæœªæ¥æ‰©å±•ï¼‰
   - ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†

7. **[05-drift-detection.md](./05-drift-detection.md)** - Driftæ£€æµ‹
   - AIæ¼‚ç§»æ£€æµ‹ï¼ˆåç»­è¿­ä»£ï¼‰
   - æ™ºèƒ½åˆ†æå’ŒæŠ¥å‘Š
   - è‡ªåŠ¨ä¿®å¤å»ºè®®

8. **[06-notification-system.md](./06-notification-system.md)** - é€šçŸ¥ç³»ç»Ÿ
   - é€šçŸ¥ç³»ç»Ÿæ¶æ„
   - äº‹ä»¶å’Œç›®æ ‡é…ç½®
   - Webhooké›†æˆ

9. **[07-logging-system.md](./07-logging-system.md)** - æ—¥å¿—ç³»ç»Ÿ
   - æ—¥å¿—ç³»ç»Ÿè®¾è®¡
   - å¤šåç«¯è¾“å‡º
   - æ—¥å¿—æŸ¥è¯¢å’Œåˆ†æ

10. **[08-database-design.md](./08-database-design.md)** - æ•°æ®åº“è®¾è®¡
    - æ•°æ®åº“è¡¨ç»“æ„
    - ç´¢å¼•å’Œçº¦æŸ
    - æ•°æ®è¿ç§»

11. **[09-api-specification.md](./09-api-specification.md)** - APIè§„èŒƒ
    - REST APIæ¥å£è§„èŒƒ
    - è¯·æ±‚/å“åº”æ ¼å¼
    - é”™è¯¯å¤„ç†

12. **[10-implementation-guide.md](./10-implementation-guide.md)** - å®ç°æŒ‡å¯¼
    - å®ç°æŒ‡å¯¼å’Œæœ€ä½³å®è·µ
    - å¼€å‘é¡ºåºå»ºè®®
    - ä»£ç ç¤ºä¾‹

13. **[11-frontend-design.md](./11-frontend-design.md)** - å‰ç«¯è®¾è®¡
    - å‰ç«¯é¡µé¢è®¾è®¡
    - 6ä¸ªæ ‡ç­¾é¡µè¯¦ç»†è®¾è®¡
    - äº¤äº’è§„èŒƒå’Œç”¨æˆ·ä½“éªŒ

14. **[12-global-configuration.md](./12-global-configuration.md)** - å…¨å±€é…ç½®
    - å…¨å±€é…ç½®ç®¡ç†
    - Agent Poolé…ç½®
    - K8sé…ç½®
    - Terraformç‰ˆæœ¬é…ç½®

15. **[15-terraform-execution-detail.md](./15-terraform-execution-detail.md)** - Terraformæ‰§è¡Œæµç¨‹è¯¦ç»†è®¾è®¡ â­ æ–°å¢
    - å®Œæ•´çš„11é˜¶æ®µæ‰§è¡Œæµç¨‹ï¼ˆåŸºäºTFEæ ‡å‡†ï¼‰
    - å·¥ä½œç›®å½•ç®¡ç†å’Œæ–‡ä»¶ç»“æ„
    - Planå’ŒApplyå¼ºè€¦åˆè®¾è®¡
    - é’©å­ç³»ç»Ÿå’Œé˜¶æ®µé…ç½®
    - å®Œæ•´çš„ä»£ç å®ç°ç¤ºä¾‹
    - æ—¥å¿—ç®¡ç†å’Œç›‘æ§æŒ‡æ ‡
    - é”™è¯¯å¤„ç†å’Œé‡è¯•ç­–ç•¥

16. **[16-advanced-stages-design.md](./16-advanced-stages-design.md)** - é«˜çº§æ‰§è¡Œé˜¶æ®µè®¾è®¡ â­ æ–°å¢
    - OPAç­–ç•¥æ£€æŸ¥è®¾è®¡ï¼ˆæœªæ¥æ‰©å±•ï¼‰
    - æˆæœ¬ä¼°ç®—åŠŸèƒ½è®¾è®¡ï¼ˆæœªæ¥æ‰©å±•ï¼‰
    - Sentinelç­–ç•¥æ£€æŸ¥è®¾è®¡ï¼ˆæœªæ¥æ‰©å±•ï¼‰
    - å®Œæ•´çš„æ•°æ®åº“è®¾è®¡å’ŒAPIè§„èŒƒ
    - ç­–ç•¥ç¤ºä¾‹å’Œé›†æˆæ–¹æ¡ˆ
    - å®æ–½è·¯çº¿å›¾å’Œä¼˜å…ˆçº§

17. **[terraform-execution-development-progress.md](./terraform-execution-development-progress.md)** - Terraformæ‰§è¡Œå¼•æ“å¼€å‘è¿›åº¦ â­ æ–°å¢
    - æ ¸å¿ƒåŠŸèƒ½å¼€å‘è®¡åˆ’ï¼ˆ3-4å‘¨ï¼‰
    - è¯¦ç»†ä»»åŠ¡æ¸…å•å’Œè¿›åº¦è·Ÿè¸ª
    - Week 1-4å®æ–½è·¯çº¿å›¾
    - æµ‹è¯•è®¡åˆ’å’Œå¼€å‘è§„èŒƒ

18. **[18-terraform-execution-testing-guide.md](./18-terraform-execution-testing-guide.md)** - Terraformæ‰§è¡Œå¼•æ“åŠŸèƒ½æµ‹è¯•æŒ‡å— â­ æ–°å¢
    - å®Œæ•´çš„åŠŸèƒ½æµ‹è¯•æµç¨‹
    - 4ä¸ªæµ‹è¯•åœºæ™¯
    - éªŒè¯æ¸…å•ï¼ˆ30+é¡¹ï¼‰
    - å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
    - æ€§èƒ½åŸºå‡†

19. **[19-new-run-workflow-design.md](./19-new-run-workflow-design.md)** - New Runå·¥ä½œæµè®¾è®¡ â­ æ–°å¢
    - New runå¯¹è¯æ¡†è®¾è®¡ï¼ˆ3ä¸ªé€‰é¡¹ï¼‰
    - æ·»åŠ èµ„æºæµç¨‹ï¼ˆ3ä¸ªæ­¥éª¤ï¼‰
    - ç‰ˆæœ¬ç®¡ç†è§„åˆ™
    - Apply Methodè¡Œä¸ºè¯´æ˜
    - å‰ç«¯å®ç°æ–¹æ¡ˆ
    - å®æ–½è®¡åˆ’ï¼ˆ4ä¸ªPhaseï¼‰

20. **[20-implementation-readiness-check.md](./20-implementation-readiness-check.md)** - å®æ–½å°±ç»ªæ£€æŸ¥ â­ æ–°å¢
    - æ–‡æ¡£å®Œæ•´æ€§è¯„ä¼°
    - å¯å®æ–½æ€§è¯„ä¼°
    - ç¼ºå¤±å†…å®¹è¡¥å……ï¼ˆè¾…åŠ©å‡½æ•°ã€æ¨¡å‹å®šä¹‰ï¼‰
    - å®æ–½è·¯çº¿å›¾å’Œé£é™©è¯„ä¼°
    - å®æ–½å°±ç»ªåº¦è¯„åˆ†ï¼š94/100

21. **[development-progress.md](./development-progress.md)** - å¼€å‘è¿›åº¦
    - å¼€å‘è¿›åº¦è·Ÿè¸ª
    - æŒ‰æ ‡ç­¾é¡µç»„ç»‡çš„å¼€å‘ä»»åŠ¡
    - Sprintä¼˜å…ˆçº§

22. **[24-execution-flow-integration-progress.md](./24-execution-flow-integration-progress.md)** - æ‰§è¡Œæµç¨‹è¿è°ƒè¿›åº¦ â­ æ–°å¢
    - è¿è°ƒè¿›åº¦è·Ÿè¸ª
    - å·²è§£å†³é—®é¢˜è®°å½•
    - æµ‹è¯•è®°å½•å’ŒéªŒè¯ç»“æœ
    - ä»£ç ä¿®æ”¹è®°å½•
    - ä¸‹ä¸€æ­¥è®¡åˆ’

### ğŸ“ å¿«é€Ÿå¯¼èˆª

ä»¥ä¸‹å†…å®¹æä¾›å¿«é€Ÿå‚è€ƒï¼Œè¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹å¯¹åº”æ–‡æ¡£ã€‚

## ğŸš€ 02. æ‰§è¡Œæ¨¡å¼è¯¦è§£

### Localæ¨¡å¼
- åœ¨æœåŠ¡å™¨æœ¬åœ°æ‰§è¡ŒTerraform
- é€‚åˆå¼€å‘æµ‹è¯•ç¯å¢ƒ
- è¯¦è§ [workspace-enhancement-complete-guide.md](../workspace-enhancement-complete-guide.md) ç¬¬1.1èŠ‚

### Agentæ¨¡å¼
- åˆ†å¸ƒå¼æ‰§è¡Œ
- Agentæ³¨å†Œå’Œå¿ƒè·³æœºåˆ¶
- è¯¦è§ [workspace-enhancement-complete-guide.md](../workspace-enhancement-complete-guide.md) ç¬¬1.2èŠ‚

### K8s Podæ¨¡å¼
- åŠ¨æ€åˆ›å»ºPod
- SecretæŒ‚è½½tokenè‡ªåŠ¨æ³¨å†Œ
- è¯¦è§ [workspace-enhancement-complete-guide.md](../workspace-enhancement-complete-guide.md) ç¬¬1.3èŠ‚

## ğŸ’¾ 03. Stateç®¡ç†ä¸ç‰ˆæœ¬æ§åˆ¶

### Stateå­˜å‚¨
- PostgreSQLå­˜å‚¨metadata
- S3å­˜å‚¨å®é™…stateæ–‡ä»¶
- è¯¦è§ [workspace-enhancement-complete-guide.md](../workspace-enhancement-complete-guide.md) ç¬¬4èŠ‚

### ç‰ˆæœ¬æ§åˆ¶
- è‡ªåŠ¨ç‰ˆæœ¬é€’å¢
- å†å²ç‰ˆæœ¬æŸ¥è¯¢
- ç‰ˆæœ¬å›æ»šæ”¯æŒ
- è¯¦è§ [workspace-enhancement-complete-guide.md](../workspace-enhancement-complete-guide.md) ç¬¬4.3èŠ‚

### é‡è¯•æœºåˆ¶
- 3æ¬¡è‡ªåŠ¨é‡è¯•
- æ‰‹åŠ¨é‡è¯•æŒ‰é’®
- Stateä¸‹è½½èƒ½åŠ›
- è¯¦è§ [workspace-enhancement-complete-guide.md](../workspace-enhancement-complete-guide.md) ç¬¬4.2èŠ‚

## ğŸ”„ 04. ä»»åŠ¡æµç¨‹

### Planä»»åŠ¡
- æ‰§è¡Œterraform plan
- ç”Ÿæˆå·®å¼‚æŠ¥å‘Š
- å¯è§†åŒ–å±•ç¤º
- è¯¦è§ [workspace-enhancement-complete-guide.md](../workspace-enhancement-complete-guide.md) ç¬¬7.1èŠ‚

### Applyä»»åŠ¡
- è‡ªåŠ¨/æ‰‹åŠ¨Applyæ¨¡å¼
- é‡æ–°æ‰§è¡Œplan
- Stateä¿å­˜
- è¯¦è§ [workspace-enhancement-complete-guide.md](../workspace-enhancement-complete-guide.md) ç¬¬7.2èŠ‚

### æ’å…¥ä»»åŠ¡ï¼ˆæœªæ¥æ‰©å±•ï¼‰
- å®¡æ‰¹æµç¨‹
- å®‰å…¨æ‰«æ
- åˆè§„æ£€æŸ¥
- è¯¦è§äº§å“è®¾è®¡æ–‡æ¡£ç¬¬å››èŠ‚

## ğŸ” 05. AI Driftæ£€æµ‹ï¼ˆåç»­è¿­ä»£ï¼‰

### åŠŸèƒ½è®¾è®¡
- å‘¨æœŸæ€§æ£€æµ‹
- AIåˆ†æå·®å¼‚
- æ™ºèƒ½æŠ¥å‘Š
- è¯¦è§äº§å“è®¾è®¡æ–‡æ¡£ç¬¬äº”èŠ‚

### é€šçŸ¥äº‹ä»¶
- `on_drift_detected`
- `on_drift_resolved`

## ğŸ“¢ 06. é€šçŸ¥ç³»ç»Ÿ

### ç¬¬ä¸€ç‰ˆï¼šåŸºç¡€Webhook
```yaml
notify_settings:
  on_start:
    - type: https
      url: https://ci-system/hooks/start
  on_plan_done:
    - type: https
      url: https://approval-system/hooks/plan
  on_completed:
    - type: https
      url: https://notification-system/hooks/success
  on_failed:
    - type: https
      url: https://alert-system/hooks/failure
```

### äº‹ä»¶é˜¶æ®µ
1. `on_start` - ä»»åŠ¡å¯åŠ¨
2. `on_planning` - å¼€å§‹plan
3. `on_plan_done` - planå®Œæˆ
4. `on_waiting_apply` - ç­‰å¾…apply
5. `on_apply_start` - å¼€å§‹apply
6. `on_completed` - ä»»åŠ¡æˆåŠŸ
7. `on_failed` - ä»»æ„é˜¶æ®µå¤±è´¥
8. `on_drift_detected` - æ£€æµ‹åˆ°æ¼‚ç§»ï¼ˆåç»­ï¼‰
9. `on_drift_resolved` - æ¼‚ç§»ä¿®å¤ï¼ˆåç»­ï¼‰

### æœªæ¥æ‰©å±•
- PrometheusæŒ‡æ ‡æ¨é€
- Lokiæ—¥å¿—æµ
- S3æŠ¥å‘Šå­˜å‚¨
- Email/Slack/Teamsé€šçŸ¥

## ğŸ“œ 07. æ—¥å¿—ç³»ç»Ÿ

### ç¬¬ä¸€ç‰ˆï¼šåŸºç¡€æ—¥å¿—
```go
type LogEntry struct {
    Workspace   string    `json:"workspace"`
    ExecutionID string    `json:"execution_id"`
    Phase       string    `json:"phase"`
    Timestamp   time.Time `json:"timestamp"`
    Message     string    `json:"message"`
    Level       string    `json:"level"`
}
```

### æ—¥å¿—çº§åˆ«
- DEBUG
- INFO
- WARN
- ERROR

### æœªæ¥æ‰©å±•
- Elasticsearchç´¢å¼•
- Lokiå®æ—¶æµ
- S3å½’æ¡£
- HTTPSè½¬å‘

## ğŸ—„ï¸ 08. æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„

#### workspacesè¡¨
```sql
CREATE TABLE workspaces (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    tags JSONB, -- æ ‡ç­¾ç³»ç»Ÿ
    
    -- æ‰§è¡Œé…ç½®
    execution_mode VARCHAR(20) DEFAULT 'local',
    agent_id INTEGER REFERENCES agents(id),
    auto_apply BOOLEAN DEFAULT false,
    plan_only BOOLEAN DEFAULT false,
    
    -- Terraformé…ç½®
    terraform_version VARCHAR(20) DEFAULT 'latest',
    workdir VARCHAR(500) DEFAULT '/workspace',
    variables JSONB,
    system_variables JSONB,
    
    -- é”å®šçŠ¶æ€
    is_locked BOOLEAN DEFAULT false,
    locked_by INTEGER REFERENCES users(id),
    locked_at TIMESTAMP,
    lock_reason TEXT,
    
    -- Stateé…ç½®
    state_backend VARCHAR(20) DEFAULT 'local',
    state_config JSONB,
    tf_code JSONB,
    tf_state JSONB,
    
    -- Provideré…ç½®
    provider_config JSONB,
    init_config JSONB,
    
    -- é€šçŸ¥å’Œæ—¥å¿—é…ç½®
    notify_settings JSONB,
    log_config JSONB,
    
    -- ç”Ÿå‘½å‘¨æœŸçŠ¶æ€
    state VARCHAR(20) DEFAULT 'created',
    
    -- å…ƒæ•°æ®
    created_by INTEGER REFERENCES users(id),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    
    UNIQUE(name, created_by)
);
```

#### workspace_tasksè¡¨
```sql
CREATE TABLE workspace_tasks (
    id SERIAL PRIMARY KEY,
    workspace_id INTEGER REFERENCES workspaces(id) ON DELETE CASCADE,
    task_type VARCHAR(20) NOT NULL, -- plan, apply
    status VARCHAR(20) DEFAULT 'pending',
    
    -- æ‰§è¡Œä¿¡æ¯
    execution_mode VARCHAR(20) NOT NULL,
    agent_id INTEGER REFERENCES agents(id),
    k8s_pod_name VARCHAR(100),
    k8s_namespace VARCHAR(100),
    
    -- è¾“å‡º
    plan_output TEXT,
    apply_output TEXT,
    error_message TEXT,
    
    -- æ—¶é—´ç»Ÿè®¡
    started_at TIMESTAMP,
    completed_at TIMESTAMP,
    duration INTEGER,
    
    -- é‡è¯•
    retry_count INTEGER DEFAULT 0,
    max_retries INTEGER DEFAULT 3,
    
    created_by INTEGER REFERENCES users(id),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

#### workspace_state_versionsè¡¨
```sql
CREATE TABLE workspace_state_versions (
    id SERIAL PRIMARY KEY,
    workspace_id INTEGER REFERENCES workspaces(id) ON DELETE CASCADE,
    content JSONB NOT NULL,
    version INTEGER NOT NULL,
    checksum VARCHAR(64) NOT NULL,
    size_bytes INTEGER,
    task_id INTEGER REFERENCES workspace_tasks(id),
    created_by INTEGER REFERENCES users(id),
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(workspace_id, version)
);
```

å®Œæ•´SQLè¯¦è§ [workspace-enhancement-complete-guide.md](../workspace-enhancement-complete-guide.md) æ•°æ®åº“è®¾è®¡ç« èŠ‚ã€‚

## ğŸ”Œ 09. APIæ¥å£è§„èŒƒ

### Workspaceç®¡ç†

```
# åˆ›å»ºWorkspace
POST /api/v1/workspaces
{
    "name": "prod-network",
    "description": "Production network infrastructure",
    "tags": ["production", "network"],
    "execution_mode": "agent",
    "agent_id": 1,
    "auto_apply": false,
    "plan_only": false,
    "terraform_version": "1.6.0",
    "variables": {...},
    "provider_config": {...}
}

# æ›´æ–°Workspace
PUT /api/v1/workspaces/:id

# è·å–Workspace
GET /api/v1/workspaces/:id

# åˆ—è¡¨Workspace
GET /api/v1/workspaces?tags=production&state=completed

# åˆ é™¤Workspace
DELETE /api/v1/workspaces/:id

# é”å®šWorkspace
POST /api/v1/workspaces/:id/lock
{
    "reason": "Maintenance in progress"
}

# è§£é”Workspace
POST /api/v1/workspaces/:id/unlock
```

### ä»»åŠ¡ç®¡ç†

```
# åˆ›å»ºPlanä»»åŠ¡
POST /api/v1/workspaces/:id/tasks/plan

# åˆ›å»ºApplyä»»åŠ¡
POST /api/v1/workspaces/:id/tasks/apply

# è·å–ä»»åŠ¡è¯¦æƒ…
GET /api/v1/workspaces/:workspace_id/tasks/:task_id

# è·å–ä»»åŠ¡åˆ—è¡¨
GET /api/v1/workspaces/:workspace_id/tasks

# å–æ¶ˆä»»åŠ¡
POST /api/v1/workspaces/:workspace_id/tasks/:task_id/cancel

# é‡è¯•ä»»åŠ¡
POST /api/v1/workspaces/:workspace_id/tasks/:task_id/retry
```

### Stateç®¡ç†

```
# è·å–Stateç‰ˆæœ¬åˆ—è¡¨
GET /api/v1/workspaces/:id/state-versions

# ä¸‹è½½æŒ‡å®šç‰ˆæœ¬State
GET /api/v1/workspaces/:id/state-versions/:version/download

# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
POST /api/v1/workspaces/:id/state-versions/:version/rollback
```

## ğŸ› ï¸ 10. å®ç°æŒ‡å¯¼

### å¼€å‘é¡ºåºå»ºè®®

#### Phase 1: æ ¸å¿ƒåŠŸèƒ½ï¼ˆ2-3å‘¨ï¼‰
1.  Workspace CRUD + Tags
2.  ç”Ÿå‘½å‘¨æœŸçŠ¶æ€æœº
3.  Localæ‰§è¡Œæ¨¡å¼
4.  Plan/ApplyåŸºç¡€æµç¨‹
5.  Stateç‰ˆæœ¬æ§åˆ¶

#### Phase 2: æ‰©å±•åŠŸèƒ½ï¼ˆ2-3å‘¨ï¼‰
6.  Agentæ‰§è¡Œæ¨¡å¼
7.  K8sæ‰§è¡Œæ¨¡å¼
8.  Workspaceé”å®š
9.  åŸºç¡€Webhooké€šçŸ¥
10.  Planå·®å¼‚å¯è§†åŒ–

#### Phase 3: ä¼˜åŒ–åŠŸèƒ½ï¼ˆ1-2å‘¨ï¼‰
11.  é‡è¯•æœºåˆ¶
12.  å¹¶å‘æ§åˆ¶
13.  ç›‘æ§æŒ‡æ ‡
14.  é”™è¯¯å¤„ç†

#### Phase 4: æœªæ¥æ‰©å±•
15. â³ æ’å…¥ä»»åŠ¡æµ
16. â³ AI Driftæ£€æµ‹
17. â³ å®Œæ•´é€šçŸ¥ç³»ç»Ÿ
18. â³ å®Œæ•´æ—¥å¿—ç³»ç»Ÿ

### æŠ€æœ¯æ ˆ

**åç«¯**:
- Go 1.21+
- Ginæ¡†æ¶
- GORM
- PostgreSQL 15+
- S3å…¼å®¹å­˜å‚¨

**å‰ç«¯**:
- React 18+
- TypeScript
- CSS Modules
- Monaco Editorï¼ˆä»£ç ç¼–è¾‘ï¼‰

**åŸºç¡€è®¾æ–½**:
- Kubernetesï¼ˆå¯é€‰ï¼‰
- Prometheusï¼ˆç›‘æ§ï¼‰
- Lokiï¼ˆæ—¥å¿—ï¼Œå¯é€‰ï¼‰

### ä»£ç ç»“æ„

```
backend/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ workspace.go
â”‚   â”œâ”€â”€ workspace_task.go
â”‚   â””â”€â”€ workspace_state_version.go
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ workspace_service.go
â”‚   â”œâ”€â”€ task_executor.go
â”‚   â”œâ”€â”€ state_manager.go
â”‚   â”œâ”€â”€ lock_manager.go
â”‚   â””â”€â”€ notify_system.go
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ workspace_controller.go
â”‚   â””â”€â”€ task_controller.go
â””â”€â”€ executors/
    â”œâ”€â”€ executor.go (interface)
    â”œâ”€â”€ local_executor.go
    â”œâ”€â”€ agent_executor.go
    â””â”€â”€ k8s_executor.go

frontend/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Workspaces.tsx
â”‚   â”œâ”€â”€ WorkspaceDetail.tsx
â”‚   â”œâ”€â”€ TaskDetail.tsx
â”‚   â””â”€â”€ StateVersions.tsx
â””â”€â”€ components/
    â”œâ”€â”€ WorkspaceForm.tsx
    â”œâ”€â”€ TaskList.tsx
    â”œâ”€â”€ PlanDiff.tsx
    â””â”€â”€ StateVersionList.tsx
```

## ğŸ“Š å…³é”®æŒ‡æ ‡

### æ€§èƒ½æŒ‡æ ‡
- Planä»»åŠ¡å¹³å‡æ‰§è¡Œæ—¶é—´: < 30s
- Applyä»»åŠ¡å¹³å‡æ‰§è¡Œæ—¶é—´: < 2min
- Stateä¿å­˜æˆåŠŸç‡: > 99.9%
- APIå“åº”æ—¶é—´: < 200ms

### å¯é æ€§æŒ‡æ ‡
- ç³»ç»Ÿå¯ç”¨æ€§: > 99.9%
- ä»»åŠ¡æˆåŠŸç‡: > 95%
- é‡è¯•æˆåŠŸç‡: > 80%

## ğŸ”— ç›¸å…³èµ„æº

### å†…éƒ¨æ–‡æ¡£
- [workspace-enhancement-complete-guide.md](../workspace-enhancement-complete-guide.md) - å†å²éœ€æ±‚æ–‡æ¡£
- [äº§å“è®¾è®¡æ–‡æ¡£.md](../../ğŸŒ AI é©±åŠ¨ Terraform å¹³å° â€” Workspace æ¨¡å—äº§å“è®¾è®¡æ–‡æ¡£.md) - æ–°äº§å“è®¾è®¡

### å¤–éƒ¨å‚è€ƒ
- [HCP Terraform Documentation](https://developer.hashicorp.com/terraform/cloud-docs)
- [Terraform State](https://developer.hashicorp.com/terraform/language/state)
- [Kubernetes Jobs](https://kubernetes.io/docs/concepts/workloads/controllers/job/)

## ğŸ“ æ›´æ–°æ—¥å¿—

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´è¯´æ˜ |
|------|------|----------|
| v2.0 | 2025-10-09 | æ•´åˆå†å²éœ€æ±‚å’Œæ–°äº§å“è®¾è®¡ï¼Œåˆ›å»ºå®Œæ•´æ–‡æ¡£é›† |
| v1.0 | 2025-01-02 | åˆå§‹ç‰ˆæœ¬ |

## ğŸ¤– AIåŠ©æ‰‹å¼€å‘æŒ‡å—

### å¼€å§‹å¼€å‘å‰å¿…è¯»

å¦‚æœä½ æ˜¯AIåŠ©æ‰‹ï¼Œå‡†å¤‡å¼€å§‹Workspaceæ¨¡å—çš„å¼€å‘ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š

#### 1. ğŸ“– é˜…è¯»æ ¸å¿ƒæ–‡æ¡£ï¼ˆå¿…è¯»ï¼‰

**ç¬¬ä¸€æ­¥ - äº†è§£æ¶æ„**:
- é˜…è¯» [00-overview.md](./00-overview.md) - äº†è§£æ•´ä½“æ¶æ„å’Œæ ¸å¿ƒç›®æ ‡
- é˜…è¯» [development-progress.md](./development-progress.md) - äº†è§£å½“å‰å¼€å‘è¿›åº¦å’Œä»»åŠ¡ä¼˜å…ˆçº§

**ç¬¬äºŒæ­¥ - äº†è§£è§„èŒƒ**:
- **åç«¯å¼€å‘**: é˜…è¯» [09-api-specification.md](./09-api-specification.md) - APIæ¥å£è§„èŒƒ
- **å‰ç«¯å¼€å‘**: é˜…è¯» [11-frontend-design.md](./11-frontend-design.md) - å‰ç«¯è®¾è®¡è§„èŒƒ
- **æ•°æ®åº“**: é˜…è¯» [08-database-design.md](./08-database-design.md) - æ•°æ®åº“è¡¨ç»“æ„

**ç¬¬ä¸‰æ­¥ - äº†è§£å®ç°ç»†èŠ‚**:
- é˜…è¯» [10-implementation-guide.md](./10-implementation-guide.md) - å®ç°æŒ‡å¯¼å’Œæœ€ä½³å®è·µ
- æ ¹æ®ä»»åŠ¡ç±»å‹é˜…è¯»ç›¸å…³æ–‡æ¡£ï¼ˆ01-07ï¼‰

#### 2. ğŸ“‹ è·å–å¼€å‘ä»»åŠ¡

ä» [development-progress.md](./development-progress.md) ä¸­æŸ¥çœ‹ï¼š
- **å½“å‰Sprintä¼˜å…ˆçº§** - äº†è§£é«˜/ä¸­/ä½ä¼˜å…ˆçº§ä»»åŠ¡
- **æŒ‰æ ‡ç­¾é¡µç»„ç»‡çš„ä»»åŠ¡** - æ ¹æ®6ä¸ªæ ‡ç­¾é¡µé€‰æ‹©ä»»åŠ¡
- **ä»»åŠ¡æ¸…å•** - æŸ¥çœ‹å…·ä½“çš„å¾…åŠäº‹é¡¹

#### 3. ğŸ” æŸ¥æ‰¾APIè§„èŒƒ

**åç«¯APIè§„èŒƒ**:
- ä¸»æ–‡æ¡£: [09-api-specification.md](./09-api-specification.md)
- Agent/K8s API: [02-agent-k8s-implementation.md](./02-agent-k8s-implementation.md)
- å…¨å±€é…ç½®API: [12-global-configuration.md](./12-global-configuration.md)

**å‰ç«¯è§„èŒƒ**:
- ä¸»æ–‡æ¡£: [11-frontend-design.md](./11-frontend-design.md)
- è¡¨å•è§„èŒƒ: `../frontend-form-style-guide.md`
- UXè§„åˆ™: `../.amazonq/prompts/frontend-ux-rules.md`

#### 4. ğŸ“ æäº¤å¼€å‘è¿›åº¦

**æ›´æ–°æ¨¡å—è¿›åº¦**:
1. å®Œæˆä»»åŠ¡åï¼Œæ›´æ–° [development-progress.md](./development-progress.md)
2. åœ¨å¯¹åº”ä»»åŠ¡å‰æ ‡è®° `[x]` è¡¨ç¤ºå®Œæˆ
3. æ›´æ–°"æ›´æ–°æ—¥å¿—"ç« èŠ‚ï¼Œè®°å½•å®Œæˆçš„å·¥ä½œ
4. æäº¤Git commitï¼Œæ ¼å¼ï¼š`feat: å®ŒæˆXXXåŠŸèƒ½`

**æ›´æ–°é¡¹ç›®æ€»è¿›åº¦**:
1. æ›´æ–° `../project-status.md` - é¡¹ç›®æ€»ä½“è¿›åº¦
2. æ›´æ–°å¯¹åº”æ¨¡å—çš„å®Œæˆåº¦ç™¾åˆ†æ¯”
3. æ·»åŠ é‡Œç¨‹ç¢‘è®°å½•

#### 5. ğŸ¯ å¼€å‘æµç¨‹ç¤ºä¾‹

```bash
# 1. é€‰æ‹©ä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼šå®ç°Overview APIï¼‰
# ä» development-progress.md æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…

# 2. é˜…è¯»ç›¸å…³æ–‡æ¡£
# - 09-api-specification.mdï¼ˆAPIè§„èŒƒï¼‰
# - 08-database-design.mdï¼ˆæ•°æ®åº“è®¾è®¡ï¼‰
# - 11-frontend-design.mdï¼ˆå‰ç«¯è®¾è®¡ï¼‰

# 3. å®ç°åŠŸèƒ½
# - åˆ›å»º/ä¿®æ”¹åç«¯ä»£ç 
# - åˆ›å»º/ä¿®æ”¹å‰ç«¯ä»£ç 
# - ç¼–å†™æµ‹è¯•

# 4. æµ‹è¯•éªŒè¯
# - è¿è¡Œå•å…ƒæµ‹è¯•
# - æ‰‹åŠ¨æµ‹è¯•åŠŸèƒ½
# - éªŒè¯APIå“åº”

# 5. æ›´æ–°æ–‡æ¡£
# - æ›´æ–° development-progress.md
# - æ ‡è®°ä»»åŠ¡ä¸ºå®Œæˆ [x]
# - æ·»åŠ æ›´æ–°æ—¥å¿—

# 6. æäº¤ä»£ç 
git add .
git commit -m "feat: å®ç°Overview API

 å®Œæˆå†…å®¹:
- å®ç°WorkspaceOverviewService
- å®ç°èµ„æºç»Ÿè®¡åŠŸèƒ½
- åˆ›å»ºOverview APIç«¯ç‚¹

ğŸ“Š è¿›åº¦æ›´æ–°:
- Overviewæ ‡ç­¾é¡µåç«¯ä»»åŠ¡: 0% â†’ 33%"

# 7. æ›´æ–°é¡¹ç›®æ€»è¿›åº¦
# ç¼–è¾‘ ../project-status.md
```

#### 6. ğŸ“š å¸¸ç”¨æ–‡æ¡£å¿«é€Ÿç´¢å¼•

| å¼€å‘ä»»åŠ¡ | éœ€è¦é˜…è¯»çš„æ–‡æ¡£ |
|---------|---------------|
| å®ç°æ–°API | 09-api-specification.md, 08-database-design.md |
| å‰ç«¯é¡µé¢ | 11-frontend-design.md, frontend-form-style-guide.md |
| æ•°æ®åº“å˜æ›´ | 08-database-design.md, development-progress.md |
| Agent/K8s | 02-agent-k8s-implementation.md, 02-execution-modes.md |
| Stateç®¡ç† | 03-state-management.md, 09-api-specification.md |
| é€šçŸ¥ç³»ç»Ÿ | 06-notification-system.md, 12-global-configuration.md |

#### 7.  é‡è¦æé†’

-  **æ°¸è¿œä¿ç•™ç”¨æˆ·è¾“å…¥** - éµå¾ªå‰ç«¯UXè§„åˆ™
-  **ä½¿ç”¨ç»Ÿä¸€é€šçŸ¥ç³»ç»Ÿ** - Toast/ConfirmDialog
-  **éµå¾ªAPIè§„èŒƒ** - ç»Ÿä¸€çš„è¯·æ±‚/å“åº”æ ¼å¼
-  **æ›´æ–°è¿›åº¦æ–‡æ¡£** - åŠæ—¶æ›´æ–°development-progress.md
-  **ç¼–å†™æ¸…æ™°çš„commit** - åŒ…å«åŠŸèƒ½æè¿°å’Œè¿›åº¦æ›´æ–°

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. é˜…è¯»æœ¬READMEäº†è§£æ•´ä½“æ¶æ„
2. æ ¹æ®å¼€å‘ä»»åŠ¡é˜…è¯»ç›¸å…³ç« èŠ‚
3. å‚è€ƒä»£ç ç¤ºä¾‹è¿›è¡Œå®ç°
4. æ›´æ–°æ–‡æ¡£åæ˜ å®é™…å®ç°

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰ç–‘é—®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- é¡¹ç›®Issue: [GitHub Issues]
- æŠ€æœ¯è®¨è®º: [Slack Channel]
- é‚®ä»¶: dev@iac-platform.com

---

**å¼€å§‹å¼€å‘**: å»ºè®®ä» [10. å®ç°æŒ‡å¯¼](#-10-å®ç°æŒ‡å¯¼) ç« èŠ‚å¼€å§‹
