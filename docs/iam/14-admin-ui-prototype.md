# IaC Platform 权限管理系统 UI 原型设计

## 📐 导航结构设计

### 1. 主导航更新

```
IaC 平台
├── 仪表板
├── 模块管理
├── 工作空间
└── 系统管理
    ├── Terraform版本
    ├── AI配置
    └── Admin (新增) ← 点击进入权限管理系统
```

### 2. Admin 子系统导航

当用户点击 "系统管理 > Admin" 后，进入权限管理界面，保持与主系统相同的导航风格：

```
左侧导航栏（与主系统风格一致）：

┌──────────────┐
│ IaC 平台     │
├──────────────┤
│ 🏢 组织管理  │ ← 默认选中
├──────────────┤
│ 📁 项目管理  │
├──────────────┤
│ 👤 用户管理  │
├──────────────┤
│ 👥 团队管理  │
├──────────────┤
│ 🔌 应用管理  │
├──────────────┤
│ 🔐 权限管理  │
├──────────────┤
│ 📋 审计日志  │
├──────────────┤
│              │
│ ← 返回主系统 │
└──────────────┘

右侧内容区域保持不变
```

**导航实现方式：**
- 复用现有的 `Layout.tsx` 组件结构
- 当进入 Admin 模块时，动态替换 `navItems` 数组
- 保持侧边栏折叠/展开功能
- 保持移动端响应式设计

---

## 🎨 页面原型设计

### 1. 组织管理页面 (Organizations)

```
┌─────────────────────────────────────────────────────────────────┐
│ 组织管理                                          [+ 创建组织]  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ 搜索: [_______________] [🔍]    筛选: [全部 ▼]                 │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────┐   │
│ │ 组织名称        显示名称        状态      创建时间   操作  │   │
│ ├─────────────────────────────────────────────────────────┤   │
│ │ default        默认组织        启用    2025-01-20  [⚙]  │   │
│ │ acme-corp      ACME公司        启用    2025-01-15  [⚙]  │   │
│ │ dev-team       开发团队        启用    2025-01-10  [⚙]  │   │
│ │ test-org       测试组织        ⚫停用    2025-01-05  [⚙]  │   │
│ └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│ 显示 1-4 / 共 4 条                              [<] 1 [>]      │
└─────────────────────────────────────────────────────────────────┘

点击 [⚙] 展开操作菜单:
• 查看详情
• 编辑设置
• 管理成员
• 管理权限
• 停用/启用
```

### 2. 项目管理页面 (Projects)

```
┌─────────────────────────────────────────────────────────────────┐
│ 项目管理                                          [+ 创建项目]  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ 组织: [default ▼]   搜索: [_______________] [🔍]               │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────┐   │
│ │ 📁 生产环境项目                                           │   │
│ │ production-env | 3 个工作空间 | 12 个成员               [⚙] │   │
│ ├─────────────────────────────────────────────────────────┤   │
│ │ 📁 开发环境项目                                           │   │
│ │ development-env | 5 个工作空间 | 8 个成员              [⚙] │   │
│ ├─────────────────────────────────────────────────────────┤   │
│ │ 📁 测试环境项目                                           │   │
│ │ testing-env | 2 个工作空间 | 5 个成员                  [⚙] │   │
│ ├─────────────────────────────────────────────────────────┤   │
│ │ 📁 默认项目                                    [默认]     │   │
│ │ default | 10 个工作空间 | 20 个成员                    [⚙] │   │
│ └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

### 3. 用户管理页面 (Users)

```
┌─────────────────────────────────────────────────────────────────┐
│ 用户管理                                          [+ 邀请用户]  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ 组织: [default ▼]   搜索: [_______________] [🔍]               │
│ 筛选: [全部用户 ▼] [所有角色 ▼] [所有状态 ▼]                  │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────┐   │
│ │ □ 用户         邮箱              角色      团队    状态   │   │
│ ├─────────────────────────────────────────────────────────┤   │
│ │ □ 👤 admin    admin@iac.com     超级管理员  -     在线 │   │
│ │ □ 👤 alice    alice@iac.com     普通用户   3个    在线 │   │
│ │ □ 👤 bob      bob@iac.com       普通用户   2个    ⚫离线 │   │
│ │ □ 👤 charlie  charlie@iac.com   普通用户   1个    在线 │   │
│ └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│ [批量操作 ▼]                     显示 1-4 / 共 4 条  [<] 1 [>] │
└─────────────────────────────────────────────────────────────────┘

批量操作菜单:
• 添加到团队
• 移除出团队
• 重置密码
• 停用账号
```

### 4. 团队管理页面 (Teams)

```
┌─────────────────────────────────────────────────────────────────┐
│ 团队管理                                          [+ 创建团队]  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ 组织: [default ▼]   搜索: [_______________] [🔍]               │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────┐   │
│ │ 团队卡片视图                                              │   │
│ │                                                           │   │
│ │ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐     │   │
│ │ │ 👥 Owners    │ │ 👥 Admins    │ │ 👥 DevOps    │     │   │
│ │ │ 系统团队     │ │ 系统团队     │ │              │     │   │
│ │ │ 2 个成员     │ │ 5 个成员     │ │ 8 个成员     │     │   │
│ │ │ 组织所有者   │ │ 组织管理员   │ │ 运维团队     │     │   │
│ │ │ [查看] [编辑]│ │ [查看] [编辑]│ │ [查看] [编辑]│     │   │
│ │ └──────────────┘ └──────────────┘ └──────────────┘     │   │
│ │                                                           │   │
│ │ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐     │   │
│ │ │ 👥 Frontend  │ │ 👥 Backend   │ │ 👥 QA Team   │     │   │
│ │ │              │ │              │ │              │     │   │
│ │ │ 6 个成员     │ │ 10 个成员    │ │ 4 个成员     │     │   │
│ │ │ 前端团队     │ │ 后端团队     │ │ 测试团队     │     │   │
│ │ │ [查看] [编辑]│ │ [查看] [编辑]│ │ [查看] [编辑]│     │   │
│ │ └──────────────┘ └──────────────┘ └──────────────┘     │   │
│ └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

### 5. 应用管理页面 (Applications)

```
┌─────────────────────────────────────────────────────────────────┐
│ 应用管理                                          [+ 创建应用]  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ 组织: [default ▼]   搜索: [_______________] [🔍]               │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────┐   │
│ │ 应用名称      类型      状态    最后使用    API调用  操作  │   │
│ ├─────────────────────────────────────────────────────────┤   │
│ │ 🔌 CI/CD Agent  Agent    启用  5分钟前    12,345  [⚙]  │   │
│ │ 🔌 Monitoring   Agent    启用  1小时前     8,234  [⚙]  │   │
│ │ 🔌 Webhook API  Webhook  启用  2小时前     3,456  [⚙]  │   │
│ │ 🔌 Backup Agent Agent    ⚫停用  3天前       1,234  [⚙]  │   │
│ └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│ 显示 1-4 / 共 4 条                              [<] 1 [>]      │
└─────────────────────────────────────────────────────────────────┘

点击 [⚙] 展开操作菜单:
• 查看详情
• 重新生成密钥
• 查看权限
• 查看日志
• 停用/启用
```

### 6. 权限管理页面 (Permissions)

```
┌─────────────────────────────────────────────────────────────────┐
│ 权限管理                                        [+ 授予权限]    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ 快速筛选: [组织 ▼] [项目 ▼] [工作空间 ▼]                      │
│ 主体类型: [全部 ▼]  搜索主体: [_______________] [🔍]           │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────┐   │
│ │ 权限矩阵视图                                              │   │
│ │                                                           │   │
│ │ 主体          资源          权限等级   过期时间    操作   │   │
│ ├─────────────────────────────────────────────────────────┤   │
│ │ 👥 DevOps团队  📁 生产项目    ADMIN     永久      [编辑] │   │
│ │ 👤 alice      🗂 workspace-1  WRITE     永久      [编辑] │   │
│ │ 👥 QA团队     📁 测试项目    READ      永久      [编辑] │   │
│ │ 🔌 CI/CD Agent 🏢 default组织 READ      30天后    [编辑] │   │
│ │ 👤 bob        📋 task-123    APPLY     1天后     [临时] │   │
│ └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│ 权限等级说明: NONE(拒绝) < READ(只读) < WRITE(读写) < ADMIN   │
└─────────────────────────────────────────────────────────────────┘
```

### 7. 审计日志页面 (Audit)

```
┌─────────────────────────────────────────────────────────────────┐
│ 审计日志                                         [导出日志]     │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ 时间范围: [最近7天 ▼]  类型: [全部 ▼]  用户: [全部 ▼]        │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────┐   │
│ │ 时间          用户    操作        资源          结果      │   │
│ ├─────────────────────────────────────────────────────────┤   │
│ │ 10:30:15     alice   授予权限    DevOps团队    成功    │   │
│ │               └─ 授予 DevOps团队 对 生产项目 的 ADMIN 权限 │   │
│ │                                                           │   │
│ │ 10:25:43     bob     访问拒绝    workspace-1   ❌拒绝    │   │
│ │               └─ 尝试执行 Apply 操作，权限不足            │   │
│ │                                                           │   │
│ │ 10:20:12     system  临时授权    task-123      成功    │   │
│ │               └─ Webhook 授予 ken@iac.com Apply 权限      │   │
│ │                                                           │   │
│ │ 10:15:30     admin   创建团队    QA Team       成功    │   │
│ │               └─ 创建新团队 "QA Team"，包含 4 个成员       │   │
│ └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│ 显示 1-4 / 共 156 条                           [<] 1 2 3 [>]   │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🎯 交互设计细节

### 1. 导航切换

```javascript
// 当用户点击 "系统管理 > Admin" 时
1. 保存当前页面状态
2. 更新侧边栏导航项为 Admin 模块菜单
3. 保持原有的侧边栏样式和交互
4. 默认显示组织管理页面
5. 底部提供"返回主系统"链接

// 导航配置示例
const adminNavItems = [
  { path: '/admin/organizations', label: '组织管理', icon: '🏢' },
  { path: '/admin/projects', label: '项目管理', icon: '📁' },
  { path: '/admin/users', label: '用户管理', icon: '👤' },
  { path: '/admin/teams', label: '团队管理', icon: '👥' },
  { path: '/admin/applications', label: '应用管理', icon: '🔌' },
  { path: '/admin/permissions', label: '权限管理', icon: '🔐' },
  { path: '/admin/audit', label: '审计日志', icon: '📋' },
];
```

### 2. 权限授予弹窗

```
┌─────────────────────────────────────────────────────────────────┐
│ 授予权限                                              [X]      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ 作用域类型: [组织 ▼]                                           │
│ 作用域:     [选择组织... ▼]                                    │
│                                                                 │
│ 主体类型:   (•) 用户  ( ) 团队  ( ) 应用                       │
│ 主体:       [选择用户... ▼]                                    │
│                                                                 │
│ 权限:       [选择权限... ▼]                                    │
│ 权限等级:   ( ) READ  (•) WRITE  ( ) ADMIN  ( ) NONE          │
│                                                                 │
│ 过期时间:   ( ) 永久                                           │
│            (•) 自定义 [2025-02-20] [18:00]                    │
│                                                                 │
│ 授权原因:   [________________________________]                │
│                                                                 │
│                                    [取消]  [确认授予]          │
└─────────────────────────────────────────────────────────────────┘
```

### 3. 团队成员管理弹窗

```
┌─────────────────────────────────────────────────────────────────┐
│ DevOps 团队成员管理                                   [X]      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ 当前成员 (8)                              [+ 添加成员]         │
│ ┌─────────────────────────────────────────────────────────┐   │
│ │ □ 成员         角色          加入时间         操作        │   │
│ ├─────────────────────────────────────────────────────────┤   │
│ │ □ alice       维护者        2025-01-15      [移除]       │   │
│ │ □ bob         成员          2025-01-16      [移除]       │   │
│ │ □ charlie     成员          2025-01-17      [移除]       │   │
│ └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│ 团队权限                                                        │
│ ┌─────────────────────────────────────────────────────────┐   │
│ │ • 生产项目 - ADMIN                                        │   │
│ │ • 开发项目 - WRITE                                        │   │
│ │ • 测试项目 - READ                                         │   │
│ └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│                                           [关闭]               │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🎨 UI 风格指南

### 1. 颜色方案

```css
/* 主色调 */
--primary-color: #1890ff;      /* 主要操作 */
--success-color: #52c41a;      /* 成功状态 */
--warning-color: #faad14;      /* 警告状态 */
--error-color: #f5222d;        /* 错误/危险 */
--info-color: #1890ff;         /* 信息提示 */

/* 中性色 */
--text-primary: #262626;       /* 主要文字 */
--text-secondary: #8c8c8c;     /* 次要文字 */
--border-color: #d9d9d9;       /* 边框 */
--bg-color: #fafafa;           /* 背景色 */
```

### 2. 图标系统

```
组织: 🏢  项目: 📁  工作空间: 🗂
用户: 👤  团队: 👥  应用: 🔌
权限: 🔐  审计: 📋  设置: ⚙️
成功:   失败: ❌  警告: 
在线: 🟢  离线: ⚫  忙碌: 🟡
```

### 3. 响应式设计

```css
/* 桌面端 (>1200px) */
- 完整侧边栏 + 二级导航
- 表格视图
- 多列布局

/* 平板端 (768px-1200px) */
- 可折叠侧边栏
- 简化表格
- 双列布局

/* 移动端 (<768px) */
- 底部导航
- 卡片视图
- 单列布局
```

---

## 📱 移动端适配

### 移动端导航（与主系统保持一致）

```
┌─────────────────────────────────┐
│ ☰  IaC 平台 - Admin   👤 alice  │
├─────────────────────────────────┤
│                                 │
│ 内容区域                        │
│ (卡片式布局)                    │
│                                 │
└─────────────────────────────────┘

点击 ☰ 展开侧边栏（从左侧滑出）：
┌──────────────┐
│ IaC 平台     │
├──────────────┤
│ 🏢 组织管理  │
│ 📁 项目管理  │
│ 👤 用户管理  │
│ 👥 团队管理  │
│ 🔌 应用管理  │
│ 🔐 权限管理  │
│ 📋 审计日志  │
│              │
│ ← 返回主系统 │
└──────────────┘
```

---

## 🔄 状态管理

### 1. 加载状态

```
┌─────────────────────────────────┐
│     ⟳ 正在加载数据...           │
│                                 │
│     [加载动画]                  │
│                                 │
└─────────────────────────────────┘
```

### 2. 空状态

```
┌─────────────────────────────────┐
│                                 │
│     📭                          │
│     暂无数据                    │
│                                 │
│     [+ 创建第一个]              │
│                                 │
└─────────────────────────────────┘
```

### 3. 错误状态

```
┌─────────────────────────────────┐
│                                 │
│                               │
│     加载失败                    │
│     请检查网络连接              │
│                                 │
│     [重试]                      │
│                                 │
└─────────────────────────────────┘
```

---

## 🚀 实施建议

### 第一阶段：基础页面
1. 组织管理页面
2. 项目管理页面
3. 基础导航结构

### 第二阶段：用户和团队
1. 用户管理页面
2. 团队管理页面
3. 成员关系管理

### 第三阶段：权限系统
1. 权限管理页面
2. 权限授予弹窗
3. 权限矩阵视图

### 第四阶段：应用和审计
1. 应用管理页面
2. 审计日志页面
3. 日志导出功能

### 第五阶段：优化完善
1. 响应式适配
2. 性能优化
3. 用户体验提升

---

*设计版本：v1.0 | 更新时间：2025-10-20*
